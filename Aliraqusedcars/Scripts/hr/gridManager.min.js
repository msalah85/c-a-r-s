var DefaultGridManager=DefaultGridManager||{},DefaultGridManager=function(){var r=function(){u()},u=function(){$("#btnAddNew").on("click",function(){var n="اضـــافة "+TitlePage;commonManger.ResetControls(formName);commonManger.showPopUpDialog(n,"save",modalDialog)});$("#"+modalDialog+" .btn-success").on("click",function(i){i.preventDefault();commonManger.saveDefaultData(modalDialog,formName,t,n)});$("#"+modalDialog+" button.clse, .modal-header .close").on("click",function(n){commonManger.ResetControls(formName);n.preventDefault()});$("#"+deleteModalDialog+" .btn-delete").on("click",function(i){i.preventDefault();commonManger.deleteDefaultData(deleteModalDialog,formName,t,n)})},t=function(n){n=n.d;$("#"+modalDialog).modal("hide");commonManger.showMessage("تم الحفظ بنجاح:",n.message);n.Status&&(i(),$.fn.afterSave(n))},n=function(n,t,i){var r=t+": "+i,u=JSON.parse(n.responseText).Message;commonManger.showMessage(r,u)},i=function(){$("#"+gridId).DataTable().draw()},f=function(t,i){var r=$("#"+gridId).DataTable({sDom:"<'row-fluid'<'span6'l><'span6 lft-pane'BTf>r>t<'row-fluid'<'span6'i><'span6'p>>",buttons:[{extend:"csv",text:"تصدير إكسيل"},{extend:"copy",text:"نسـخ"},{text:"طباعة",action:function(){$(".dataTables_length,.form-horizontal").closest("div.row-fluid").addClass("hidden-print");window.print()}}],language:{url:"/Scripts/datatables/Arabic.min.js"},sPaginationType:"bootstrap",bServerSide:!0,destroy:!0,processing:!0,sAjaxSource:mainServiceUrl+"LoadData",fnServerData:function(t,i,r){dataService.callAjax("GET",i,t,function(n){commonManger.setData2Grid(n,i.sEcho,r)},n)},fnServerParams:function(n){if(n.push({name:"funName",value:tableName+"_SelectList"}),t!==undefined)for(var i in t)n.push({name:i,value:t[i]})},fnFooterCallback:function(n,t,r,u,f){i&&i(n,t,r,u,f)},iDisplayLength:50,aaSorting:[],aoColumns:gridColumns});commonManger.searchData(r);$("#"+gridId+" tbody").delegate("tr button","click",function(n){var u,f,t,c,s,o,l;if(n.preventDefault(),u=$(this),f=u.closest("tr").index(),f!=null)if(u.hasClass("edit"))c="تعديل "+TitlePage,s="save",t=r.row(f).data(),commonManger.ResetControls(formName),commonManger.getDataForUpdate(t,formName),commonManger.showPopUpDialog(c,s,modalDialog);else if(u.hasClass("remove")){t=r.row(f).data();var a=" حــذف "+TitlePage,s="delete",i=[],e="";if(pKey.toLowerCase().indexOf(",")>=0){for(i=pKey.split(","),o=0;o<i.length-1;o++)e+=t[i[o]]+",";e+=t[i[i.length-1]]}else e=t[pKey];$("#"+deleteModalDialog).find(".removeField").text(e);commonManger.showPopUpDialog(a,s,deleteModalDialog)}else if(u.hasClass("print")){l=commonManger.convertcurrentdate();t=r.row(f).data();var v=$(this).attr("id"),h="",i=[];procedureName==""&&(procedureName=tableName);pKey.toLowerCase().indexOf(",")>=0?(i=pKey.split(","),h=t[i[0]]+":"+t[i[1]]):h=t[pKey];commonManger.sendReportInfo(procedureName,h,l)}})};return{Init:r,successCallback:t,errorCallBack:n,fillItemsDataTable:f,updateGrid:i}}();