var pageManager=function(){"use strict";var n=function(){f();$("#CheckNo").change(function(n){n.preventDefault();var t=$(this).val();t!==""&&s(t)});$("#SaveAll").click(function(n){n.preventDefault();t()})},t=function(){if(i()){var n=$("#listItems tbody tr").map(function(n,t){return $(t).find("td:eq(0)").text()}).get().join(","),t=[$("#ReviewPaymentID").val(),$("#CheckNo").val(),$("#PaymentDate").val(),$("#AmountDhs").val().replace(",",""),$("#Notes").val(),n,$("#TotalAmountDhs").text().replace(",","")],u={actionName:"PayInvoicePaymentsReview_Save",names:["ReviewPaymentID","CheckNo","PaymentDate","AmountDhs","Notes","PayPaymentsIDs","AmountSum"],values:t};dataService.callAjax("Post",JSON.stringify(u),sUrl+"saveData",r,commonManger.errorException)}},i=function(){var n=!0;return($("#TotalAmountDhs").text()==="0"||$("#listItems tbody tr").length<=0)&&(n=!1),n},r=function(n){n=n.d;n.Status&&(window.location.href="BankBalancesView.aspx")},u=function(){var i=commonManger.comp2json(data.d),n=i.list,t;n&&(t=$(n).map(function(n,t){return $("<option />").val(t.CheckNo).text(t.CheckNo)}).get(),$("#CheckNo").append(t).trigger("chosen:updated").trigger("liszt:updated"))},f=function(){dataService.callAjax("Post",JSON.stringify({actionName:"PayInvoicePaymentsReview_Properties"}),sUrl+"GetDataDirect",u,commonManger.errorException)},e=function(n){var u=commonManger.comp2json(n.d),i=u.list;if(i){var f=$("#listItems tbody"),t=0,r="",e=$(i).map(function(n,i){return t+=i.AmountDhs*1,r=i.PaymentsDates,$("<tr><td>"+i.PayInvoicePaymentsID+"<\/td><td>"+i.PaymentsDates+"<\/td><td>"+i.ExchangeCompanyNameAr+"<\/td><td>"+i.AuctionNameAr+"<\/td>                             <td>"+i.BuyerName+"<\/td><td>"+i.Notes+"<\/td><td>"+numeral(i.AmountDhs).format("0,0.0")+"<\/td><\/tr>")}).get();f.html("").append(e);$("#AmountDhs").val(numeral(t).format("0,0"));t=numeral(t).format("0,0.0");$("#TotalAmountDhs").text(t);$("#PaymentDate").val(r)}else o()},o=function(){$("#aspnetForm")[0].reset();$("#listItems tbody").html("");$("#TotalAmountDhs").text("0")},s=function(n){var t={actionName:"PayInvoicePaymentsReview_GetByCheckNo",value:n};dataService.callAjax("Post",JSON.stringify(t),sUrl+"GetData",e,commonManger.errorException)};return{Init:n}}();pageManager.Init();
//# sourceMappingURL=PayInvoicePaymentsReview.min.js.map
