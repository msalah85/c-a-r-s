var DefaultGridManager=function(){var r=function(){$("#btnAddNew").on("click",function(){var n="اضـــافة "+TitlePage;commonManger.ResetControls(formName);commonManger.showPopUpDialog(n,"save",modalDialog)});f();u()},u=function(){$("#"+modalDialog+" .btn-success").on("click",function(i){i.preventDefault();n($(this),!0);commonManger.saveDefaultData(modalDialog,formName,t,commonManger.errorException)});$("#"+modalDialog+" button.clse, .modal-header .close").on("click",function(n){commonManger.ResetControls(formName);n.preventDefault()});$("#"+deleteModalDialog+" .btn-delete").on("click",function(n){n.preventDefault();commonManger.deleteDefaultData(deleteModalDialog,formName,t,commonManger.errorException)});$(".modal").on("show.bs.modal",function(){n($("#"+modalDialog+' .btn[type="submit"]'),!1);var t=$(this),i=t.find("button.btn-success").eq(0);i.focus();return})},t=function(t){t=t.d;$("#"+modalDialog).modal("hide");n($("#"+modalDialog+' .btn[type="submit"]'),!1);commonManger.showMessage("تم الحفظ بنجاح:",t.message);t.Status&&i()},i=function(){$("#"+gridId).DataTable().draw(!1)},n=function(n,t){t===!0?(n.addClass("disabled").prop("disabled",!0).text("قيد التنفيذ..."),$("#listItems tbody td a.waitingPay").removeAttr("href")):n.removeClass("disabled").removeAttr("disabled").text(function(){return $(this).attr("data-text")})},f=function(){var n=$("#"+gridId).DataTable({sDom:"<'row-fluid'<'span6'l><'span6 lft-pane'BTf>r>t<'row-fluid'<'span6'i><'span6'p>>",buttons:[{extend:"csv",text:"تصدير إكسيل"},{extend:"copy",text:"نسـخ"},{text:"طباعة",action:function(){$(".dataTables_length,.form-horizontal").closest("div.row-fluid").addClass("hidden-print");window.print()}}],language:{url:"/Scripts/datatables/Arabic.min.js"},sPaginationType:"bootstrap",bServerSide:!0,responsive:!0,saveState:!0,processing:!0,sAjaxSource:sUrl+"LoadDataTablesXML",fnServerParams:function(n){n.push({name:"funName",value:tableName+"_SelectList"},{name:"names",value:filterNames},{name:"values",value:filterValues})},fnServerData:function(n,t,i){dataService.callAjax("GET",t,n,function(n){commonManger.setData2Grid(n,t.sEcho,i)},commonManger.errorException)},aaSorting:[],aoColumns:gridColumns});commonManger.searchData(n);$("#"+gridId+" tbody").delegate("tr button","click",function(t){var u,f,i,c,s,o,l;if(t.preventDefault(),u=$(this),f=u.closest("tr"),f!==null)if(u.hasClass("edit"))c="تعديل "+TitlePage,s="save",i=n.row(f).data(),commonManger.ResetControls(formName),commonManger.getDataForUpdate(i,formName),commonManger.showPopUpDialog(c,s,modalDialog);else if(u.hasClass("remove")){i=n.row(f).data();var a=" حــذف "+TitlePage,r=[],e="";if(pKey.toLowerCase().indexOf(",")>=0){for(r=pKey.split(","),o=0;o<r.length-1;o++)e+=i[r[o]]+",";e+=i[r[r.length-1]]}else e=i[pKey];$("#"+deleteModalDialog).find(".removeField").text(e);commonManger.showPopUpDialog(a,s,deleteModalDialog)}else if(u.hasClass("print")){l=commonManger.convertcurrentdate();i=n.row(f).data();var v=$(this).attr("id"),h="",r=[];procedureName===""&&(procedureName=tableName);pKey.toLowerCase().indexOf(",")>=0?(r=pKey.split(","),h=i[r[0]]+":"+i[r[1]]):h=i[pKey];commonManger.sendReportInfo(procedureName,h,l)}})};return{Init:r,successCallback:t,btnProceessing:n,updateGrid:i}}();