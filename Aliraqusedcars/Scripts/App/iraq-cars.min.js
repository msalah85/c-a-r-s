var storage=$.localStorage,CarsViewManager=function(){var n={WithoutShipp:0},t=function(){i();r()},i=function(){var t=storage.isSet("srchIrCars")?storage.get("srchIrCars"):null;t!==null&&(n.WithoutShipp=t.WithoutShipp);n.WithoutShipp===1&&($("#iraq-carsTabs li.active").removeClass("active"),$('a[data-id="'+n.WithoutShipp+'"][data-toggle="tab"]').closest("li").addClass("active"));o()},r=function(){$("#iraq-carsTabs li a").click(function(n){n.preventDefault();$(this).closest("li").hasClass("active")||(f(),u($(this).data("id")))})},u=function(t){n.WithoutShipp=t;storage.set("srchIrCars",n);e()},f=function(){n={WithoutShipp:""};storage.remove("srchIrCars")},e=function(){$("#listItems").DataTable().draw(!1)},o=function(){var t=$("#listItems").DataTable({sDom:"<'row-fluid tbl-head-options'<'span6'l><'span6 lft-pane'BT>r>t<'row-fluid'<'span6'i><'span6'p>>",deferRender:!0,stateSave:!0,buttons:[{extend:"csv",text:"تصدير إكسيل"},{extend:"copy",text:"نسـخ"},{text:"طباعة",action:function(){window.print()}}],language:{search:"_INPUT_",searchPlaceholder:"رقم السيارة - اللوت"},bDestroy:!0,bServerSide:!0,responsive:!0,sAjaxSource:sUrl+"LoadDataTablesXML",fnServerParams:function(t){t.push({name:"funName",value:"CarsData_IraqCarsList"},{name:"names",value:"WithoutShipp"},{name:"values",value:n.WithoutShipp})},fnServerData:function(n,t,i){dataService.callAjax("GET",t,n,function(n){var u=commonManger.comp2json(n.d),f=u.list,r=u.list1,e=u.list2,o,s;r=r?$.map(r,function(n){return n}):[0];o={sEcho:t.sEcho?t.sEcho:0,iTotalRecords:r[0],iTotalDisplayRecords:r[0],aaData:$.isArray(f)?f:$.makeArray(f)};i(o);e&&console.log(e.ClientsCarsPaidNotSold);$(".withShippingCosts").text(numeral(r[1]).format("0,0"));$(".withoutShippingCosts").text(numeral(r[2]).format("0,0"));s=r[1]*1+r[2]*1;$(".allCarsCosts").text(numeral(s).format("0,0"))},commonManger.errorException)},fnRowCallback:function(n,t){t.WorkingStatusID===4&&$(n).addClass("warning").attr("title","سيارة سكراب")},footerCallback:function(){var n=this.api(),t=n.column(3).data().reduce(function(n,t){return numeral().unformat(n)*1+numeral().unformat(t)*1},0);$(n.column(3).footer()).text(numeral(t).format("0,0"))},iDisplayLength:25,aaSorting:[[0,"desc"]],aoColumns:[{mDataProp:"CarID",bSortable:!0,sClass:"text-center"},{mDataProp:"MainPicture",bSortable:!1,sClass:"text-center",mData:function(n){return n.MainPicture!=null?'<a title="صور السيارة رقم: '+n.CarID+'" href="images.aspx?id='+n.CarID+'"><img alt="car" src="/public/cars/'+n.CarID+"/_thumb/"+n.MainPicture+'" /><\/a>':'<img alt="car" width="60" src="/public/cars/noimage.gif" /><\/a>'}},{bSortable:!0,mData:function(n){return'<a title="تفاصيل للسيارة" href="CarDetailsPrint.aspx?id='+n.CarID+'&any=1" >'+n.MakerNameEn+" - "+n.TypeNameEn+" - "+n.Year+"<\/a>"}},{mData:function(n){return numeral(n.CarCosts).format("0,0")},bSortable:!0},{mDataProp:"DistinationNameAr",bSortable:!1,mData:function(n){return n.Arrived||n.DistinationNameEn.toLowerCase()=="gulfauto"?'<img src="/App_Themes/iraq/images/'+n.DistinationNameEn+'.jpg" width="25" /> '+n.DistinationNameAr:'<img src="/App_Themes/iraq/images/USA.jpg" width="25" /> أمريكا'}},{sClass:"text-center hidden-print",bSortable:!1,mData:function(n){return'<a href="InvoiceSaleAdd.aspx?id='+n.CarID+'" class="btn btn-minier btn-success" data-rel="tooltip" title="بــيع" data-original-title="انشاء فاتورة بــيع">بيع<\/a> '}}]})};return{Init:t}}();
//# sourceMappingURL=iraq-cars.min.js.map
