var pageManager=pageManager||{},pageManager=function(){var n="#listItems",i=function(){t()},r=function(){i()},o=function(){$("#btnSearchAll").click(function(n){n.preventDefault();t()})},s=function(){var t={exportID:$("#ExportID").val(),funName:"ReExportInvoices_Save",dateFrom:$("#From").val(),dateTo:$("#To").val(),carsNo:$(".carsNo").text().replace("# ",""),totalCustoms:$(".carsCustoms").text().replace(" $",""),customsNo:$(".noCustoms").text().replace("# ",""),totalrealCustoms:$(".customsTotal").text().replace(" د.إ",""),revised:$("#Revised").is(":checked"),masterFields:["ExportID","DateFrom","DateTo","NoCars","NoCustoms","TotalAmount","RealAmount","Revised"],detailFields:["CarID","CustomsNo","GroupTotalAmount"]},f=[t.exportID,t.dateFrom,t.dateTo,t.carsNo,t.customsNo,t.totalCustoms,t.totalrealCustoms,t.revised],i=[],r=0,u=null;$(n+" tbody tr").each(function(){var n=$(this),e=n.find("td:eq(0) a").data("id"),t=n.find("td:eq(3)").text(),f=n.find("td:eq(5) input").val();u===t?f=r:(r=f,u=t);i.push(e+","+t+","+f)});saveDataMasterDetails(t.funName,t.masterFields,f,t.detailFields,i)},h=function(n){n=n.d;n.Status?(commonManger.showMessage("تم الحفظ",n.message),window.location.href="ReExportCarsPrint.aspx?id="+n.ID):commonManger.showMessage("خطأ أثناء الحفظ","لقد حدث خطأ أثناء عملية .. "+n.message)},u=function(n){n=n.d;n.Status?(e(),commonManger.showMessage("تم تنفيذ طلبك","تم تنفيذ طلبك بنجاح.")):commonManger.showMessage("خطأ فى التنفيذ","لقد حدث خطأ في تنفيذ الإجراء ، يرجي المحاولة فى وقت لاحق.")},f=function(n){var t={CarID:n,actionName:"ReExportCarsReceive_Paper"},i={actionName:t.actionName,names:["CarID"],values:[t.CarID]};dataService.callAjax("Post",JSON.stringify(i),sUrl+"saveData",u,commonManger.errorException)},e=function(){$(n).DataTable().draw(!1)},t=function(){var t=$(n).DataTable({sDom:"<'row-fluid'<'span6'l><'span6 lft-pane'BT>r>t<'row-fluid'<'span6'i><'span6'p>>",buttons:[{extend:"csv",text:"تصدير إكسيل"},{extend:"copy",text:"نسـخ"},{text:"طباعة",action:function(){window.print()}}],bProcessing:!0,bServerSide:!0,responsive:!0,bDestroy:!0,bSort:!1,sAjaxSource:sUrl+"LoadDataTablesXML",fnServerParams:function(n){n.push({name:"funName",value:"ReExportCars_PaperList"})},fnServerData:function(n,t,i){dataService.callAjax("GET",t,n,function(n){commonManger.setData2Grid(n,t.sEcho,i)},commonManger.errorException)},iDisplayLength:50,aoColumns:[{mDataProp:"CarID",bSortable:!1},{bSortable:!1,mData:function(n){return'<a title="تفاصيل السيارة" href="CarDetailsPrint.aspx?id='+n.CarID+'">'+n.MakerNameEn+" - "+n.TypeNameEn+" - "+n.Year+"<\/a>"}},{bSortable:!1,mData:function(n){return n.Shipper?n.Shipper:""}},{mData:function(n){return n.full_name?'<a title="حساب العميل" href="ClientCars.aspx?id='+n.ClientID+'">'+n.full_name+"<\/a>":""},bSortable:!0,sClass:"v-middle"},{mDataProp:"CustomsDate",bSortable:!0,sClass:"v-middle",mData:function(n){return commonManger.formatJSONDateCal(n.CustomsDate)}},{bSortable:!1,sClass:"center",mData:function(n){return'<a data-id="'+n.CarID+'" class="btn btn-mini btn-success btnReceive" data-rel="tooltip" title="استلام ورق السيارة من العميل"><i class="icon-ok icon-only"><\/i><\/a>'}}]});$(n+" tbody").delegate("tr a.btnReceive","click",function(n){n.stopImmediatePropagation();n.preventDefault();var i=$(this),t=i.attr("data-id");t&&bootbox.confirm("هل أنت متأكد من استلام ورق السيارة مرة أخري من العميل؟",function(n){n&&f(t)})})};return{Init:r}}();
//# sourceMappingURL=ReexportCarsNorPaperList.min.js.map
