var DefaultGridManager=function(){var t=function(){u();i()},i=function(){$("#btnAddNew").on("click",function(){var n="اضـــافة "+TitlePage;commonManger.ResetControls(formName);commonManger.showPopUpDialog(n,"save",modalDialog)});$("#"+modalDialog+" .btn-success").on("click",function(t){t.preventDefault();commonManger.saveDefaultData(modalDialog,formName,n,commonManger.errorException)});$("#"+modalDialog+" button.clse, .modal-header .close").on("click",function(n){commonManger.ResetControls(formName);n.preventDefault()});$("#"+deleteModalDialog+" .btn-delete").on("click",function(t){t.preventDefault();commonManger.deleteDefaultData(deleteModalDialog,formName,n,commonManger.errorException)})},n=function(n){n=n.d;$("#"+modalDialog).modal("hide");commonManger.showMessage("تم الحفظ بنجاح:",n.message);n.Status&&$("#"+gridId).DataTable().draw(!0)},r=function(){$("#"+gridId).DataTable().draw()},u=function(){var n=$("#"+gridId).DataTable({sDom:"<'row-fluid'<'span6'l><'span6 lft-pane'BTf>r>t<'row-fluid'<'span6'i><'span6'p>>",buttons:[{extend:"csv",text:"تصدير إكسيل"},{extend:"copy",text:"نسـخ"},{text:"طباعة",action:function(){$(".dataTables_length,.form-horizontal").closest("div.row-fluid").addClass("hidden-print");window.print()}}],language:{url:"/Scripts/datatables/Arabic.min.js"},sPaginationType:"bootstrap",bServerSide:!0,responsive:!0,processing:!0,sAjaxSource:sUrl+"LoadDataTablesXML",fnServerParams:function(n){n.push({name:"funName",value:tableName+"_SelectList"})},fnServerData:function(n,t,i){dataService.callAjax("GET",t,n,function(n){commonManger.setData2Grid(n,t.sEcho,i)},commonManger.errorException)},aaSorting:[],aoColumns:gridColumns});commonManger.searchData(n);$("#"+gridId+" tbody").delegate("tr button","click",function(t){var u,f,i,c,s,o,l;if(t.preventDefault(),u=$(this),f=u.closest("tr"),f!==null)if(u.hasClass("edit"))c="تعديل "+TitlePage,s="save",i=n.row(f).data(),commonManger.ResetControls(formName),commonManger.getDataForUpdate(i,formName),commonManger.showPopUpDialog(c,s,modalDialog);else if(u.hasClass("remove")){i=n.row(f).data();var a=" حــذف "+TitlePage,r=[],e="";if(pKey.toLowerCase().indexOf(",")>=0){for(r=pKey.split(","),o=0;o<r.length-1;o++)e+=i[r[o]]+",";e+=i[r[r.length-1]]}else e=i[pKey];$("#"+deleteModalDialog).find(".removeField").text(e);commonManger.showPopUpDialog(a,s,deleteModalDialog)}else if(u.hasClass("print")){l=commonManger.convertcurrentdate();i=n.row(f).data();var v=$(this).attr("id"),h="",r=[];procedureName==""&&(procedureName=tableName);pKey.toLowerCase().indexOf(",")>=0?(r=pKey.split(","),h=i[r[0]]+":"+i[r[1]]):h=i[pKey];commonManger.sendReportInfo(procedureName,h,l)}})};return{Init:t,successCallback:n,updateGrid:r}}();