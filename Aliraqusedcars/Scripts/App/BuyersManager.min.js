var BuyersManager=function(){var n=function(){$("a.btn-add").on("click",function(){$("#aspnetForm")[0].reset();$("#BuyerID").val("0");commonManger.enableAllFormElements("aspnetForm");commonManger.showPopUpDialog("اضــافـة بـــــايـــــر","insert","BuyerModal")});e();t()},t=function(){$("#BuyerModal .modal-footer .btn-success").on("click",function(n){var i,r;n.preventDefault();var t={};t.BuyerID=$("#BuyerID").val();t.AuctionID=$("#ddlAuctionID option:selected").val();t.AuctionTypeID=$("#ddlAuctionType option:selected").val();t.ClientID=$("#ddlClientID option:selected").val();t.BuyerName=$("#BuyerName").val();t.BuyerFee=$("#BuyerFee").val();t.Active=!0;t.Username=$("#Username").val();t.Password=$("#Password").val();t.Puse=$("#Puse").val()===""?null:$("#Puse").val()>0?!0:!1;i={scParam:t};r=f();r&&commonManger.doWork("BuyerModal","aspnetForm","Buyers.aspx/SaveBuyer",i,u,commonManger.errorException)})},i=function(n,t){var i={ClientID:t,BuyerID:n};commonManger.doWork("BuyerModal","aspnetForm","Buyers.aspx/DeleteBuyer",i,r,commonManger.errorException)},r=function(n){n=n.d;$("#BuyerModal").modal("hide");n.Status?($("#listItems").DataTable().draw(),commonManger.showMessage("تم الحذف بنجاح","تمت عملية الحذف بنجاح")):commonManger.showMessage("خطأ بالحذف","لقد حدث خطأ أثناء عملية الحذف ، برجاء المحاولة مرة أخري.")},u=function(n){n=n.d;$("#BuyerModal").modal("hide");n.Status?($("#listItems").DataTable().draw(),commonManger.showMessage("تم الحفظ بنجاح","تمت عملية الحفظ بنجاح")):commonManger.showMessage("خطأ بالحفظ","لقد حدث خطأ أثناء عملية الحفظ ، برجاء المحاولة مرة أخري.")},f=function(){var n=!1;return $("#BuyerName").val()!=""&&$("#BuyerID").val()!=""&&$("select[id$=ddlAuctionID] option:selected").val()!=""&&$("select[id$=ddlAuctionType] option:selected").val()!=""&&(n=!0),n},e=function(){var n=$("#listItems").DataTable({sDom:"<'row-fluid'<'span6'l><'span6 lft-pane'Tf>r>t<'row-fluid'<'span6'i><'span6'p>>",oTableTools:{aButtons:["copy","xls","print"]},bServerSide:!0,responsive:!0,responsive:!0,sAjaxSource:"Buyers.aspx/LoadData",fnServerData:function(n,t,i){dataService.callAjax("GET",t,n,function(n){i(n.d)},commonManger.errorException)},iDisplayLength:50,aoColumns:[{mDataProp:"BuyerName",bSortable:!0},{mDataProp:"AuctionTypeName",bSortable:!0},{mDataProp:"AuctionNameAr",bSortable:!0},{mDataProp:"full_name",bSortable:!0,mData:function(n){return'<a title="بيرات العميل" href="clientbuyers.aspx?client='+n.ClientID+'">'+n.full_name+"<\/a>"}},{mDataProp:"Username",bSortable:!1},{mDataProp:"Password",bSortable:!1},{mDataProp:"BuyerFee",bSortable:!1},{bSortable:!1,mData:function(n){return n.Puse===null?"":n.Puse?'<i title="الباير متوقف عن العميل الآن" class="red icon-pause"><\/i>':'<i title="الباير فعال لدي العميل الآن" class="green icon-ok"><\/i>'}},{sClass:"hidden-print",bSortable:!1,mData:function(){return'<button class="btn btn-minier btn-info edit" data-toggle="tooltip" data-placement="top" data-original-title="تعديل" title="تعديل"><i class="icon-edit"><\/i><\/button> <button class="btn btn-minier btn-danger remove" data-toggle="tooltip" data-placement="top" data-original-title="حــذف" title="حــذف"><i class="icon-remove"><\/i><\/button>'}}]});commonManger.searchData(n);$("#listItems tbody").delegate("tr button","click",function(t){var u,f,r;if(t.preventDefault(),u=$(this),f=u.closest("tr"),f!==null)if(u.hasClass("edit"))r=n.row(f).data(),$("#aspnetForm")[0].reset(),commonManger.enableAllFormElements("aspnetForm"),$("#BuyerID").val(r.BuyerID),$("#BuyerName").val(r.BuyerName),$("#BuyerFee").val(r.BuyerFee),$("select[id$=ddlAuctionType]").val(r.AuctionTypeID),$("select[id$=ddlAuctionID]").val(r.AuctionID),$("select[id$=ddlClientID]").val(r.ClientID),$("#Username").val(r.Username),$("#Password").val(r.Password),$("#Puse").val(r.Puse===null?"":r.Puse==!0?1:0),commonManger.showPopUpDialog("تعديل المــــــــــزادات","edit","BuyerModal");else u.hasClass("remove")&&DeleteConfirmation(function(){r=n.row(f).data();i(r.BuyerID,r.ClientID)})})};return{Init:n}}();