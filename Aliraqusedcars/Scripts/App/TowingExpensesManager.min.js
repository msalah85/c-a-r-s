var TowingExpensesManager=function(){var i=function(){$("a.btn-add").on("click",function(){$("#aspnetForm")[0].reset();commonManger.ResetControls("formMain");$("#TowingExpenseID").val("0");commonManger.enableAllFormElements("aspnetForm");commonManger.showPopUpDialog("اضافة مصروف Towing","insert","ShipExpenseModal")});f();r()},r=function(){$("#ShipExpenseModal .modal-footer .btn-success").on("click",function(i){var f,e;i.preventDefault();var r={};r.TowingExpenseID=$("#TowingExpenseID").val();r.ShipCompanyID=$("#ShipCompanyID option:selected").val();r.ServiceTypeID=1;r.RegionID=$("select[id$=RegionID] option:selected").val();r.ExpensesCharge=$("#ExpensesCharge").val();f={scParam:r};e=u();e&&commonManger.doWork("ShipExpenseModal","aspnetForm","TowingExpenses.aspx/SaveTowingExpense",f,n,t)})},n=function(n){n=n.d;$("#ShipExpenseModal").modal("hide");commonManger.showMessage("تمت عملية الإضافه بنجاح.",n.Message);n.Status&&$("#listItems").dataTable().fnDraw()},t=function(n,t,i){var r=t+": "+i,u=JSON.parse(n.responseText).Message;commonManger.showMessage(r,u)},u=function(){var n=!1;return $("#ExpensesCharge").val()!==""&&$("select[id$=ShipCompanyID] option:selected").val()!==""&&$("#RegionID option:selected").val()!==""&&(n=!0),n},f=function(){var i=$("#listItems").dataTable({sDom:"<'row-fluid'<'span6'l><'span6 lft-pane'Tf>r>t<'row-fluid'<'span6'i><'span6'p>>",oTableTools:{aButtons:["copy","xls","print"]},bServerSide:!0,responsive:!0,sAjaxSource:"/api/general.aspx/LoadData?funName=TowingExpenses_SelectList",fnServerData:function(n,t,i){$.ajax({type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",url:n,data:t,success:function(n){i(n.d)},error:function(n){commonManger.showMessage("خطأ بالخادم!",n.Message)}})},iDisplayLength:50,aoColumns:[{mDataProp:"TowingExpenseID",bSearchable:!1,bSortable:!0},{mDataProp:"ShipCompanyNameAr",bSearchable:!0,bSortable:!0},{mDataProp:"RegionAr",bSearchable:!0,bSortable:!0},{mDataProp:"ExpensesCharge",bSearchable:!0,bSortable:!1},{bSortable:!1,sClass:"hidden-print",mData:function(n){return'<input type="hidden" value="'+n.ShipCompanyID+'" id="scID_'+n.ShipCompanyID+'" /><input type="hidden" value="'+n.RegionID+'" id="dID_'+n.RegionID+'" /><button class="btn btn-minier btn-info edit" data-rel="tooltip" data-placement="top" data-original-title="تعديل"><i class="icon-edit"><\/i><\/button><button class="btn btn-minier btn-danger remove" data-rel="tooltip" data-placement="top" data-original-title="حــذف"><i class="icon-remove"><\/i><\/button>'}}]});commonManger.searchData(i);$("#listItems tbody").delegate("tr button","click",function(r){var f,e,u;if(r.preventDefault(),f=$(this),e=f.closest("tr").index(),e!==null)if(f.hasClass("edit")){var o="تعديل مصروف الTowing",s="edit",h="ShipExpenseModal";u=i.fnGetData(e);$("#aspnetForm")[0].reset();commonManger.enableAllFormElements("aspnetForm");$("#TowingExpenseID").val(u.TowingExpenseID);$("#ExpensesCharge").val(u.ExpensesCharge);$("select[id$=ShipCompanyID]").val(f.parent().find("input[id$=scID_"+u.ShipCompanyID+"]").val());$("select[id$=RegionID]").val(f.parent().find("input[id$=dID_"+u.RegionID+"]").val());$("select[id$=ShipCompanyID], select[id$=RegionID]").trigger("chosen:updated");commonManger.showPopUpDialog(o,s,h)}else if(f.hasClass("remove"))DeleteConfirmation(function(){u=i.fnGetData(e);var r=u.TowingExpenseID;commonManger.deleteData("anyThing",n,t,"TowingExpenses","TowingExpenseID",r)});else if(f.hasClass("view")){var o="عرض مصروف الTowing",s="edit",h="ShipExpenseModal";u=i.fnGetData(e);$("#aspnetForm")[0].reset();$("#TowingExpenseID").val(u.TowingExpenseID);$("#ExpensesCharge").val(u.ExpensesCharge);$("select[id$=ShipCompanyID]").val(f.parent().find("input[id$=scID_"+u.ShipCompanyID+"]").val());$("select[id$=ServiceTypeID]").val(f.parent().find("input[id$=etID_"+u.ServiceTypeID+"]").val());$("select[id$=RegionID]").val(f.parent().find("input[id$=dID_"+u.RegionID+"]").val());commonManger.showPopUpDialog(o,s,h);commonManger.disableAllFormElements("aspnetForm")}})};return{Init:i}}();TowingExpensesManager.Init();
//# sourceMappingURL=TowingExpensesManager.min.js.map
