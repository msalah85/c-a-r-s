var pageManager=pageManager||{},pageManager=function(){var t=function(){i();n();r()},i=function(){var n=new Date;n.setDate(n.getDate()-30);$("#From").datepicker("setDate",n);tableName="Bank";gridId="listItems"},r=function(){$("#btnSearchAll").click(function(n){n.preventDefault();u()})},u=function(){$("#"+gridId).DataTable().draw()},n=function(){var n=$("#"+gridId).DataTable({sDom:"<'row-fluid'<'span6'l><'span6 lft-pane'BT>r>t<'row-fluid'<'span6'i><'span6'p>>",buttons:[{extend:"csv",text:"تصدير إكسيل"},{extend:"copy",text:"نسـخ"},{text:"طباعة",action:function(){$(".dataTables_length,.form-horizontal").closest("div.row-fluid").addClass("hidden-print");window.print()}}],language:{url:"/Scripts/DataTables/Arabic.min.js"},sPaginationType:"bootstrap",bProcessing:!0,bServerSide:!0,responsive:!0,bRetrieve:!0,bDestroy:!0,iDisplayLength:100,sAjaxSource:"BankBalancesView.aspx/LoadData",fnServerParams:function(n){n.push({name:"From",value:commonManger.dateFormat($("#From").val())},{name:"To",value:commonManger.dateFormat($("#To").val())})},fnServerData:function(n,t,i){dataService.callAjax("GET",t,n,function(n){var u=commonManger.comp2json(n.d),o=u.list,r=u.list1,f=u.list2,e=u.list3,s,h;r=r?$.map(r,function(n){return n}):[0];s={sEcho:t.sEcho?t.sEcho:0,iTotalRecords:r[0],iTotalDisplayRecords:r[0],aaData:$.isArray(o)?o:$.makeArray(o)};i(s);r&&$(".sum-total-all").text(numeral(r.TotalSum).format("0,0"));f&&$("strong.Balance").text(numeral(f.Balance).format("0,0.00"));e&&e.ClientsAmountNotReviewed*1>0&&(h='<i data-rel="tooltip" title="إيداعات العملاء الغير معتمدة: '+numeral(e.ClientsAmountNotReviewed).format("0,0.00")+"، إجمالى الرصيد: "+numeral((f.Balance?f.Balance*1:0)+e.ClientsAmountNotReviewed*1).format("0,0.00")+' درهم." class="icon-info-sign red"><\/i>',$("span.extra").html(h),$('[data-toggle="tooltip"],[data-rel=tooltip],.ace-tooltip').tooltip())},commonManger.errorException)},fnFooterCallback:function(n,t){$(".page-header h1 small").remove();t.length>0&&$(".page-header h1").append("<small>في الفترة من: "+commonManger.formatJSONDateCal(t[0].Date)+" إلى: "+commonManger.formatJSONDateCal(t[t.length-1].Date))},aaSorting:[],aoColumns:[{mDataProp:"ID",bSortable:!1,mData:function(n){return'<a href="'+(n.InAmount*1>0?"ClientPaymentsReviewPrint":"ReceiptPaymentsPrint")+".aspx?id="+n.ID+'">'+n.ID+"<\/a>"}},{mDataProp:"Date",bSortable:!1,mData:function(n){return commonManger.formatJSONDateCal(n.Date,"dd/MM/yyyy")}},{sClass:"hidden-480 hidden-phone",mData:function(n){return n.Note?n.Note:""},bSortable:!1},{mDataProp:"InAmount",bSortable:!1,mData:function(n){return numeral(n.InAmount).format("0,0.00")}},{mDataProp:"OutAmount",bSortable:!1,mData:function(n){return numeral(n.OutAmount).format("0,0.00")}},{mDataProp:"Balance",bSortable:!1,mData:function(n){return numeral(n.Balance).format("0,0.00")}}]})};return{Init:t,fillDataTable:n}}();
