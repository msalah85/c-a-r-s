var ShipperExpensesManager=ShipperExpensesManager||{},ShipperExpensesManager=function(){var r="aspnetForm",u="CustomsExpenses.aspx/SaveShippExpense",n={},e=function(){n={shipper:$("#ShipperSearch").val()!=""?$("#ShipperSearch").val():"",type:$("#expenseTypeSearch").val()!=""?$("#expenseTypeSearch").val():"",distin:$("#distinationSearch").val()!=""?$("#distinationSearch").val():""};l();o()},o=function(){$("a.btn-add").on("click",function(){$("form")[0].reset();$("#ShipperExpenseID").val("0");commonManger.enableAllFormElements("aspnetForm");commonManger.showPopUpDialog("اضافة المصروف","insert","ShipExpenseModal")});$("table tbody a[data-action=collapse]").live("click",function(n){n.preventDefault();var i=$(this).closest("tr").find("input[type=hidden]").val(),t=$(this).find("i");t.hasClass("icon-chevron-up")?($("table tbody tr[data-id=comp-"+i+"]").hide("slow"),t.addClass("icon-chevron-down").removeClass("icon-chevron-up")):($("table tbody tr[data-id=comp-"+i+"]").show("slow"),t.addClass("icon-chevron-up").removeClass("icon-chevron-down"))});$("table tbody form select[name=ExpenseTypeID]").live("change",function(){var t=$(this).val(),n=$(this).closest("form");n.children("[name=NavigationCoID],[name=DistinationID]").prop("disabled",!0).val("");t==="3"?n.find("[name=NavigationCoID],[name=DistinationID]").prop("disabled",!1):n.children("[name=DistinationID]").prop("disabled",!1)});$("#aspnetForm #ExpenseTypeID").change(function(){t($(this).val())});$("#ShipExpenseModal .modal-footer .btn-success").on("click",function(n){var t,f,e,o;n.preventDefault();t={};t.ShipperExpenseID=$("#aspnetForm #ShipperExpenseID").val();t.CustomsCompanyID=$("#aspnetForm #CustomsCompanyID").val();t.ExpenseTypeID=$("#aspnetForm #ExpenseTypeID").val();t.DistinationID=$("#aspnetForm select[id$=DistinationID]").val();t.ShowTypeID=2;t.ExpenseCalcType=$("#aspnetForm select[id$=ExpenseCalcType]").val();t.ExpensesCharge=$("#aspnetForm #ExpensesCharge").val();f=$("#aspnetForm #NavigationCo").val();t.ExpenseTypeID==="3"&&(t.NavigationCoID=f);e={scParam:t};o=h();o?commonManger.doWork("ShipExpenseModal",r,u,e,i,commonManger.errorException):commonManger.showMessage("حقول مطلوبة","برجاء ادخال جميع الحقول الاجبارية أولاً.")});$("#ShipperSearch").html($("#CustomsCompanyID").html());$("#distinationSearch").html($("#DistinationID").html());$("#expenseTypeSearch").html($("#ExpenseTypeID").html());$("#btnSearchAll").click(function(t){t.preventDefault();n.shipper=$("#ShipperSearch").val()!=""?$("#ShipperSearch").val():"";n.type=$("#expenseTypeSearch").val()!=""?$("#expenseTypeSearch").val():"";n.distin=$("#distinationSearch").val()!=""?$("#distinationSearch").val():"";f()})},s=function(){$("#aspnetForm input:not([type=radio]),#aspnetForm select").val("");$("#ShipperExpenseID").val(0);$("#aspnetForm").trigger("reset")},t=function(n){$("#divTrackingLines,#divContainerSize,#divDistinationID").addClass("hide").find("select").val("");n==="3"?$("#divTrackingLines,#divDistinationID").removeClass("hide"):n==="2"?$("#divTrackingLines,#divDistinationID").removeClass("hide"):$("#divDistinationID").removeClass("hide")},i=function(n){n=n.d;$("#ShipExpenseModal").modal("hide");commonManger.showMessage("تنفيذ الاجراء:",n.Message);n.Status&&(s(),t(0),f())},h=function(){var n=!1;return $("#ExpensesCharge").val()!==""&&$("select[id$=ExpenseTypeID]").val()!==""&&$("select[id$=CustomsCompanyID]").val()!==""&&(n=!0),n},c=function(){$("a.editable").editable({validate:function(n){return $.trim(n)===""?"مطلوب.":isNaN(n)?"أرقام فقط.":void 0},url:function(n){return n.table=$(this).data("table"),n.id=$(this).data("id"),$.ajax({type:"POST",url:sUrl+"InlineEdit",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json",async:!0,cache:!1,timeout:1e4,success:function(){commonManger.showMessage("تم الحفظ:","تم حفظ قيمة المصروف بنجاح.")},error:function(){commonManger.showMessage("خطأ:","لقد حدث خطأ فى تنفيذ الإجراء.")}})}})},f=function(){var n=$("#listItems").DataTable();n.draw()},l=function(){var f=$("#listItems").DataTable({responsive:!0,bServerSide:!0,bRetrieve:!1,bDestroy:!0,sDom:"<'row-fluid'<'span6'l><'span6 lft-pane'BTf>r>t<'row-fluid'<'span6'i><'span6'p>>",buttons:[{extend:"csv",text:"تصدير إكسيل"},{extend:"copy",text:"نسـخ"}],sAjaxSource:sUrl+"LoadDataTablesXML",fnServerParams:function(t){t.push({name:"funName",value:"CustomExpenses_SelectList"},{name:"names",value:"Shipper~Type~Distin"},{name:"values",value:n.shipper+"~"+n.type+"~"+n.distin})},fnServerData:function(n,t,i){dataService.callAjax("GET",t,n,function(n){commonManger.setData2Grid(n,t.sEcho,i)},commonManger.errorException)},iDisplayLength:50,aaSorting:[[0,"asc"]],drawCallback:function(){var n=this.api(),e=n.rows({page:"current"}).nodes(),t=null,i,r,u,f;n.column(0,{page:"current"}).data().each(function(n,i){t!==n&&($(e).eq(i).before('<tr class="group alert alert-success"><td colspan="100%">'+n+'&nbsp;<a class="grey" href="#collapse" data-action="collapse"><i class="1 bigger-125 icon-chevron-up"><\/i><\/a><\/td><\/tr>'),t=n)});c();i=$("#aspnetForm #ExpenseTypeID").html();$(".form-inline select[name=ExpenseTypeID]").append(i);r=$("#aspnetForm #NavigationCo").html();$(".form-inline select[name=NavigationCoID]").append(r);u=$("#aspnetForm #ExpenseCalcType").html();$(".form-inline select[name=ExpenseCalcType]").append(u);f=$("#aspnetForm #DistinationID").html();$("#listItems tbody select[name=DistinationID]").html(f)},rowCallback:function(n,t){$(n).attr("data-id","comp-"+t.CustomsCompanyID)},aoColumns:[{mDataProp:"CustomsCompanyNameAr",bVisible:!1,mData:function(n){return"<strong>"+n.CustomsCompanyNameAr+'<\/strong><form class="form-inline hidden-print frm-add"><input type="hidden" name="CustomsCompanyID" value="'+n.CustomsCompanyID+'" />                                        <select class="input-medium" name="ExpenseTypeID" required><\/select>                                        <input type="hidden" name="ShowTypeID" value="2" />                                        <select class="input-medium" name="ExpenseCalcType" required><\/select>                                        <select class="input-medium" name="DistinationID" required><\/select>                                        <select class="input-medium" disabled name="NavigationCoID"><\/select>                                        <input type="text" class="input-small" required placeholder="المبلغ" required value="0" name="ExpensesCharge" name="ExpensesCharge" />                                        <button type="submit" class="btn btn-small btn-success" title="أضف مصروف"><i class="icon-plus"><\/i><\/button><\/form>'}},{mDataProp:"ExpenseTypeNameAr",bSortable:!1},{mDataProp:"DistinationNameAr",bSortable:!1,mData:function(n){return n.DistinationNameAr?n.DistinationNameAr:""}},{mDataProp:"ExpensesCharge",bSortable:!1,mData:function(n){return'<a title="تعديل المبلغ" data-type="text" data-id="ShipperExpenseID" data-pk="'+n.ShipperExpenseID+'" data-table="ShipperExpenses" data-name="ExpensesCharge" class="editable" href="#" data-placeholder="أدخل المبلغ">'+numeral(n.ExpensesCharge).format("0.00")+"<\/a>"}},{mDataProp:"NavigationCoName",bSortable:!1,mData:function(n){return n.NavigationCoName?n.NavigationCoName:""}},{bSortable:!1,sClass:"hidden-print",mData:function(){return'<button class="btn btn-minier btn-info edit clickMe" data-rel="tooltip" data-placement="top" data-original-title="تعديل"><i class="icon-edit"><\/i><\/button> <button class="btn btn-minier btn-danger remove clickMe" data-rel="tooltip" data-placement="top" data-original-title="حــذف"><i class="icon-remove"><\/i><\/button>'}}]});commonManger.searchData(f);$("#listItems tbody").delegate("tr button.clickMe","click",function(n){var u,e,r;if(n.preventDefault(),u=$(this),e=u.closest("tr"),e!==null)if(u.hasClass("edit"))r=f.row(e).data(),commonManger.enableAllFormElements("aspnetForm"),$("#aspnetForm select[id$=ExpenseTypeID]").val(r.ExpenseTypeID),t($("#aspnetForm select[id$=ExpenseTypeID]").val()),$("#aspnetForm #ShipperExpenseID").val(r.ShipperExpenseID),$("#aspnetForm #NavigationCo").val(r.NavigationCoID),$("#aspnetForm #ExpensesCharge").val(r.ExpensesCharge),$("#aspnetForm #ExpenseCalcType").val(r.ExpenseCalcType),$("#aspnetForm select[id$=CustomsCompanyID]").val(r.CustomsCompanyID),$("#aspnetForm select[id$=DistinationID]").val(r.DistinationID),commonManger.showPopUpDialog("تعديل المصروف","edit","ShipExpenseModal");else u.hasClass("remove")&&DeleteConfirmation(function(){r=f.row(e).data();commonManger.deleteData("anyThing",i,commonManger.errorException,"ShipperExpenses","ShipperExpenseID",r.ShipperExpenseID)})});$("#listItems tbody").delegate("tr form.frm-add","submit",function(n){n.preventDefault();var t=$(this).serializeArray().reduce(function(n,t){return n[t.name]=t.value,n},{});commonManger.doWork("ShipExpenseModal",r,u,{scParam:t},i,commonManger.errorException)})},a=function(){};return{Init:e,showHideLines:t}}();
//# sourceMappingURL=CustomExpensesManager.min.js.map
