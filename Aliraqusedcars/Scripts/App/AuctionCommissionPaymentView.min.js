var pageManager=pageManager||{},pageManager=function(){var n="",t="",i=null,r=null,u=function(){h();o();f()},f=function(){$("#btnSearchAll").click(function(u){u.preventDefault();n=$("#auction").val();t=$("#ExchangeCompanyID").val();i=commonManger.dateFormat($("#From").val());r=commonManger.dateFormat($("#To").val());s()})},e=function(n){var t=JSON.parse(n.d);$(t).each(function(n,t){t.List==2&&$("#auction").append("<option value='"+t.AuctionID+"'>"+t.AuctionName+"<\/option>")});$("#auction").chosen().trigger("chosen:updated").trigger("liszt:updated");$(t).each(function(n,t){t.List==0&&$("#ExchangeCompanyID").append("<option value='"+t.ID+"'>"+t.Name+"<\/option>")});$("#ExchangeCompanyID").chosen().trigger("chosen:updated").trigger("liszt:updated")},o=function(){dataService.callAjax("Post",JSON.stringify({actionName:"AuctionCommPayments_Properties",value:""}),mainServiceUrl+"GetData",e,commonManger.errorException)},s=function(){$("#listItems").DataTable().draw()},h=function(){var u=$("#listItems").DataTable({sDom:"<'row-fluid'<'span6'l><'span6 lft-pane'T>r>t<'row-fluid'<'span6'i><'span6'p>>",oTableTools:{aButtons:["copy","xls","print"]},bProcessing:!0,bServerSide:!0,responsive:!0,bRetrieve:!1,bDestroy:!0,sAjaxSource:"AuctionCommissionPaymentView.aspx/LoadData",fnServerParams:function(u){u.push({name:"auction",value:n},{name:"exchangeCo",value:t},{name:"From",value:i},{name:"To",value:r})},fnServerData:function(n,t,i){dataService.callAjax("GET",t,n,function(n){var t=n.d;i(t)},commonManger.errorException)},iDisplayLength:50,aaSorting:[],aoColumns:[{mDataProp:"ACommPaymentID",bSearchable:!0,bSortable:!0},{mDataProp:"ACommPaymentDate",bSearchable:!0,bSortable:!0,mData:function(n){return commonManger.formatJSONDate(n.ACommPaymentDate)}},{mDataProp:"AuctionName",bSearchable:!0,bSortable:!0},{mDataProp:"ExchangeCompanyNameAr",bSortable:!1},{mDataProp:"CheckNo",bSortable:!1},{mDataProp:"ACommAmount",bSortable:!1},{mDataProp:"ACommAmountDhs",bSortable:!1},{bSortable:!1,sClass:"hidden-print",mData:function(){return'<button class="btn btn-mini btn-danger remove" data-rel="tooltip" data-placement="top" data-original-title="حــذف" title="حــذف"><i class="icon-remove icon-only"><\/i><\/button><\/div>'}}]});$("#listItems tbody").delegate("tr button","click",function(n){var t,i,r,f;n.preventDefault();t=$(this);i=t.closest("tr");i!=null&&t.hasClass("remove")&&(f=function(){r=u.row(i).data();var n=r.ACommPaymentID;commonManger.deleteData("anyThing",commonManger.successDeleted,commonManger.errorException,"AuctionCommPayments","ACommPaymentID",n)},DeleteConfirmation(f))})};return{Init:u}}();