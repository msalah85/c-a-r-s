var RegionsManager=function(){var i=function(){$('input[type="text"],.input-sm').on("focus click",function(){$(this).select()});$("a.btn-add").on("click",function(){$("#aspnetForm")[0].reset();$("#RegionID").val("0");commonManger.enableAllFormElements("aspnetForm");commonManger.showPopUpDialog("اضافة مــــــــــدينة","insert","RegionModal")});f();r()},r=function(){$("#RegionModal .modal-footer .btn-success").on("click",function(i){var f,e;i.preventDefault();var r={};r.RegionID=$("#RegionID").val();r.RegionAr=$("#txtRegionAr").val();r.RegionEn=$("#txtRegionEn").val();r.RegionCommissionJor=$("#RegionCommissionJor").val();f={scParam:r};e=u();e&&commonManger.doWork("RegionModal","aspnetForm","Regions.aspx/SaveRegion",f,n,t)})},n=function(n){n=n.d;$("#RegionModal").modal("hide");commonManger.showMessage("تمت عملية الإضافه بنجاح.",n.Message);n.Status&&$("#listItems").dataTable().fnDraw()},t=function(n,t,i){var r=t+": "+i,u=JSON.parse(n.responseText).Message;commonManger.showMessage(r,u)},u=function(){var n=!1;return $("#txtRegionEn").val()!=""&&$("#txtRegionAr").val()!=""&&(n=!0),n},f=function(){var i=$("#listItems").dataTable({sDom:"<'row-fluid'<'span6'l><'span6 lft-pane'Tf>r>t<'row-fluid'<'span6'i><'span6'p>>",oTableTools:{aButtons:["copy","xls","print"]},bServerSide:!0,responsive:!0,sAjaxSource:"/api/general.aspx/LoadData?funName=Regions_SelectList",fnServerData:function(n,t,i){dataService.callAjax("GET",t,n,function(n){var t=n.d;i(t)},commonManger.errorException)},iDisplayLength:50,drawCallback:function(){$("a.editable").editable({validate:function(n){return $.trim(n)===""?"مطلوب.":isNaN(n)?"أرقام فقط.":void 0},url:function(n){return n.table=$(this).data("table"),n.id=$(this).data("id"),$.ajax({type:"POST",url:sUrl+"InlineEdit",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json",async:!0,cache:!1,timeout:1e4,success:function(){commonManger.showMessage("تم الحفظ:","تم حفظ عمولة البيع للأردن نقداً بنجاح.")},error:function(){commonManger.showMessage("خطأ:","لقد حدث خطأ فى تنفيذ الإجراء.")}})}})},aoColumns:[{mDataProp:"RegionID",bSortable:!0},{mDataProp:"RegionAr",bSortable:!0},{mDataProp:"RegionEn",bSortable:!0},{mDataProp:"RegionCommissionJor",bSortable:!1,mData:function(n){return'<a title="تعديل المبلغ" data-type="text" data-id="RegionID" data-pk="'+n.RegionID+'" data-table="Regions" data-name="RegionCommissionJor" class="editable" href="#" data-placeholder="أدخل المبلغ">'+n.RegionCommissionJor+"<\/a>"}},{bSortable:!1,sClass:"hidden-print",mData:function(){return'<button class="btn btn-mini btn-info edit" data-rel="tooltip" data-placement="top" data-original-title="تعديل"><i class="icon-edit"><\/i><\/button>                                    <button class="btn btn-mini btn-danger remove" data-rel="tooltip" data-placement="top" data-original-title="حــذف"><i class="icon-remove"><\/i><\/button>'}}]});commonManger.searchData(i);$("#listItems tbody").delegate("tr button.btn-mini","click",function(r){var f,e,u;if(r.preventDefault(),f=$(this),e=f.closest("tr").index(),e!=null)if(f.hasClass("edit"))u=i.fnGetData(e),$("#aspnetForm")[0].reset(),commonManger.enableAllFormElements("aspnetForm"),$("#RegionID").val(u.RegionID),$("#txtRegionAr").val(u.RegionAr),$("#txtRegionEn").val(u.RegionEn),$("#RegionCommissionJor").val(u.RegionCommissionJor),commonManger.showPopUpDialog("تعديل المــــــــــدينة","edit","RegionModal");else f.hasClass("remove")&&DeleteConfirmation(function(){u=i.fnGetData(e);var r=u.RegionID;commonManger.deleteData("anyThing",n,t,"Regions","RegionID",r)})})};return{Init:i}}();
//# sourceMappingURL=RegionsManager.min.js.map
