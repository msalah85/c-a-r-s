var BudgetReport=function(){var n=function(){r();t()},t=function(){$("#btnSaveBudjet").click(function(n){n.preventDefault();var t={date:commonManger.formatJSONDateCal(new Date,"MM/dd/yyyy"),bank:$(".bank-balance").text(),cars:$(".comp-cars-costs").text(),clients:$(".clients-required").text(),inTotal:$(".total-required").text(),shipp:$(".waiting-shipp").text(),cust:$(".waiting-cust").text(),outTotal:$(".total-waiting-inv").text(),net:$(".total-budget").text()},r={actionName:"Budgets_Save",names:["Date","Bank","Cars","Clients","InTotal","Shipp","Cust","OutTotal","Net"],values:[t.date,t.bank,t.cars,t.clients,t.inTotal,t.shipp,t.cust,t.outTotal,t.net]};dataService.callAjax("Post",JSON.stringify(r),sUrl+"saveData",i,commonManger.errorException)})},i=function(n){console.log(n.d);commonManger.showMessage("تم الحفظ:","تم أخذ نسخه من تقرير رأس المال الحالى.")},r=function(){dataService.callAjax("Post",JSON.stringify({actionName:"Budget_Select"}),sUrl+"GetDataDirect",u,commonManger.errorException)},u=function(n){var y=commonManger.comp2json(n.d),t=y.list,r=0,e=0,u=0,i=0;if(t){$("#AddDate").text(commonManger.formatJSONDateCal(t.AddDate,"dd/MM/yyyy"));var o=t.CurrentBankBalance?t.CurrentBankBalance*1:0,s=t.ClientsCarsPayPricesNotSold?t.ClientsCarsPayPricesNotSold*1:0,h=t.IraqCarCost?t.IraqCarCost*1:0,c=t.ClientsRequired?t.ClientsRequired*1:0,r=o+c+h+s;$(".bank-balance").text(numeral(o).format("0,0"));$(".clients-required").text(numeral(c).format("0,0"));$(".comp-cars-costs").text(numeral(h+s).format("0,0"));f(!0);var p=t.WaitingShippInvoicesToPay?t.WaitingShippInvoicesToPay*1:0,w=t.CarsCostsWaitingToShipp?t.CarsCostsWaitingToShipp*1:0,e=p+w;$(".waiting-shipp").text(numeral(e).format("0,0"));WaitingCustomInvoices=t.WaitingCustomInvoices?t.WaitingCustomInvoices*1:0;WaitingCustInvToPay=t.WaitingCustInvToPay?t.WaitingCustInvToPay*1:0;u=WaitingCustomInvoices+WaitingCustInvToPay;$(".waiting-cust").text(numeral(u).format("0,0"));var l=t.AdvOutsideReceivable*1,a=t.AdvOutsideCreditor*1,v=t.AdvUsersReceivable*1;r+=l+v;i=a;$(".AdvOutsideReceivable").text(numeral(l).format("0,0"));$(".AdvOutsideCreditor").text(numeral(a).format("0,0"));$(".AdvUsersReceivable").text(numeral(v).format("0,0"))}$(".total-required").text(numeral(r).format("0,0"));i+=e+u;$(".total-waiting-inv").text(numeral(i).format("0,0"));$(".total-budget").text(numeral(r-i).format("0,0"))},f=function(n){n&&$(".btns").removeClass("hidden")};return{Init:n}}();