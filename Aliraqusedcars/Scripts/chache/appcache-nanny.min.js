"use strict";(function(n,t){function r(){var t={},n=this;n.on=function(n,i,r){t[n]||(t[n]=[]);t[n].push({f:i,c:r})};n.off=function(n,i){for(var r=t[n]||[],u=r.length=i?r.length:0;u-->0;)i===r[u].f&&r.splice(u,1)};n.trigger=function(){for(var r=Array.apply([],arguments),i=t[r.shift()]||[],u=i.length,n=0;n<u;n++)i[n].f.apply(i[n].c,r)};n.bind=n.on;n.unbind=n.off;n.emit=n.trigger}var i=typeof applicationCache=="undefined"?undefined:applicationCache;typeof define=="function"&&define.amd?define([],function(){return n.appCacheNanny=t(i,r),n.appCacheNanny}):typeof exports=="object"?module.exports=t(i,r):n.appCacheNanny=t(i,r)})(this,function(n,t){function nt(){var t;try{b=!localStorage.getItem(g);localStorage.setItem(g,"1")}catch(r){}if(!i.isSupported()){i.update=d;return}if(n.status!==n.UNCACHED){tt();e=!1;h=!0;a.forEach(function(n){n()});return}u=document.createElement("iframe");u.src=f.loaderPath;u.style.display="none";u.onload=function(){n=u.contentWindow.applicationCache;tt();e=!1;h=!0;setTimeout(function(){a.forEach(function(n){n()})},100)};u.onerror=function(){throw new Error("/appcache-loader.html could not be loaded.");};t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(u,t)}function tt(){s("updateready",it);s("error",rt);s("obsolete",ut);s("noupdate",y);s("cached",y);s("progress",y);s("downloading",y);addEventListener("online",i.update,!1);addEventListener("offline",i.update,!1)}function s(t,i){n.addEventListener(t,i,!1)}function r(n){c||i.trigger(n)}function it(){if(n.status!==n.UPDATEREADY){v=!0;ft();return}c||(c=!0,i.trigger("updateready"));n.swapCache()}function y(n){var t="";(b&&(t="init:",n.type==="cached"&&(b=!1)),v?(r("updateready"),v=!1):r(t+n.type),o)&&(o=!1,i.start(),r("online"))}function rt(){(r("error"),o)||(o=!0,n.status!==n.UNCACHED)&&(i.start(),r("offline"))}function ut(){r("obsolete");o&&(o=!1,r("online"));i.stop()}function ft(){u&&u.remove();h=!1;e=!1;i.update()}var p=3e4,i=new t,f={loaderPath:"/appcache-loader.html",checkInterval:p,offlineCheckInterval:p},u,h=!1,e=!1,w,v;i.isSupported=function(){return!!n};i.update=function(){if(r("update"),!h)return a.push(i.update),e||(nt(),e=!0),!0;if(!i.isSupported())return!1;try{return n.update(),!0}catch(t){return i.update=d,!1}};i.start=function(n){if(n&&i.set(n),!h)return a.push(i.start),e||(nt(),e=!0),!0;clearInterval(w);k=o?i.get("offlineCheckInterval"):i.get("checkInterval");w=setInterval(i.update,k);l=!0;r("start")};i.stop=function(){l&&(clearInterval(w),l=!1,r("stop"))};i.isCheckingForUpdates=function(){return l};i.hasUpdate=function(){return c};i.set=function(n,t){var i,r;if(typeof n=="object"){r=n;for(i in r)r.hasOwnProperty(i)&&(f[i]=r[i]);return}f[n]=t};i.get=function(n){var t,i={};if(n)return f[n];for(t in f)f.hasOwnProperty(t)&&(i[t]=f[t]);return i};var k=p,c=!1,l=!1,o=!1,b=!1,d=function(){},g="_appcache_nanny",a=[];return v=!1,i});
//# sourceMappingURL=appcache-nanny.min.js.map
