(function($){$.fn.editable=function(n,t){if("disable"==n){$(this).data("disabled.editable",!0);return}if("enable"==n){$(this).data("disabled.editable",!1);return}if("destroy"==n){$(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");return}var i=$.extend({},$.fn.editable.defaults,{target:n},t),e=$.editable.types[i.type].plugin||function(){},o=$.editable.types[i.type].submit||function(){},s=$.editable.types[i.type].buttons||$.editable.types.defaults.buttons,u=$.editable.types[i.type].content||$.editable.types.defaults.content,h=$.editable.types[i.type].element||$.editable.types.defaults.element,r=$.editable.types[i.type].reset||$.editable.types.defaults.reset,f=i.callback||function(){},c=i.onedit||function(){},l=i.onsubmit||function(){},a=i.onreset||function(){},v=i.onerror||r;return i.tooltip&&$(this).attr("title",i.tooltip),i.autowidth="auto"==i.width,i.autoheight="auto"==i.height,this.each(function(){var n=this,t=$(n).width(),y=$(n).height();$(this).data("event.editable",i.event);$.trim($(this).html())||$(this).html(i.placeholder);$(this).bind(i.event,function(a){var p,w,k,d,b;!0!==$(this).data("disabled.editable")&&(n.editing||!1!==c.apply(this,[i,n])&&(a.preventDefault(),a.stopPropagation(),i.tooltip&&$(n).removeAttr("title"),0==$(n).width()?(i.width=t,i.height=y):(i.width!="none"&&(i.width=i.autowidth?$(n).width():i.width),i.height!="none"&&(i.height=i.autoheight?$(n).height():i.height)),$(this).html().toLowerCase().replace(/(;|")/g,"")==i.placeholder.toLowerCase().replace(/(;|")/g,"")&&$(this).html(""),n.editing=!0,n.revert=$(n).html(),$(n).html(""),p=$("<form />"),i.cssclass&&("inherit"==i.cssclass?p.attr("class",$(n).attr("class")):p.attr("class",i.cssclass)),i.style&&("inherit"==i.style?(p.attr("style",$(n).attr("style")),p.css("display",$(n).css("display"))):p.attr("style",i.style)),w=h.apply(p,[i,n]),i.loadurl?(b=setTimeout(function(){w.disabled=!0;u.apply(p,[i.loadtext,i,n])},100),d={},d[i.id]=n.id,$.isFunction(i.loaddata)?$.extend(d,i.loaddata.apply(n,[n.revert,i])):$.extend(d,i.loaddata),$.ajax({type:i.loadtype,url:i.loadurl,data:d,async:!1,success:function(n){window.clearTimeout(b);k=n;w.disabled=!1}})):i.data?(k=i.data,$.isFunction(i.data)&&(k=i.data.apply(n,[n.revert,i]))):k=n.revert,u.apply(p,[k,i,n]),w.attr("name",i.name),s.apply(p,[i,n]),$(n).append(p),e.apply(p,[i,n]),$(":input:visible:enabled:first",p).focus(),i.select&&w.select(),w.keydown(function(t){t.keyCode==27&&(t.preventDefault(),r.apply(p,[i,n]))}),"cancel"==i.onblur?w.blur(function(){b=setTimeout(function(){r.apply(p,[i,n])},500)}):"submit"==i.onblur?w.blur(function(){b=setTimeout(function(){p.submit()},200)}):$.isFunction(i.onblur)?w.blur(function(){i.onblur.apply(n,[w.val(),i])}):w.blur(function(){}),p.submit(function(t){var e,r,u;return b&&clearTimeout(b),t.preventDefault(),!1!==l.apply(p,[i,n])&&!1!==o.apply(p,[i,n])&&($.isFunction(i.target)?(e=i.target.apply(n,[w.val(),i]),$(n).html(e),n.editing=!1,f.apply(n,[n.innerHTML,i]),$.trim($(n).html())||$(n).html(i.placeholder)):(r={},r[i.name]=w.val(),r[i.id]=n.id,$.isFunction(i.submitdata)?$.extend(r,i.submitdata.apply(n,[n.revert,i])):$.extend(r,i.submitdata),"PUT"==i.method&&(r._method="put"),$(n).html(i.indicator),u={type:"POST",data:r,dataType:"html",url:i.target,success:function(t){u.dataType=="html"&&$(n).html(t);n.editing=!1;f.apply(n,[t,i]);$.trim($(n).html())||$(n).html(i.placeholder)},error:function(t){v.apply(p,[i,n,t])}},$.extend(u,i.ajaxoptions),$.ajax(u))),$(n).attr("title",i.tooltip),!1})))});this.reset=function(t){this.editing&&!1!==a.apply(t,[i,n])&&($(n).html(n.revert),n.editing=!1,$.trim($(n).html())||$(n).html(i.placeholder),i.tooltip&&$(n).attr("title",i.tooltip))}})};$.editable={types:{defaults:{element:function(){var n=$('<input type="hidden"><\/input>');return $(this).append(n),n},content:function(n){$(":input:first",this).val(n)},reset:function(n,t){t.reset(this)},buttons:function(n,t){var u=this,i,r;n.submit&&(n.submit.match(/>$/)?i=$(n.submit).click(function(){i.attr("type")!="submit"&&u.submit()}):(i=$('<button type="submit" />'),i.html(n.submit)),$(this).append(i));n.cancel&&(n.cancel.match(/>$/)?r=$(n.cancel):(r=$('<button type="cancel" />'),r.html(n.cancel)),$(this).append(r),$(r).click(function(){var i;return i=$.isFunction($.editable.types[n.type].reset)?$.editable.types[n.type].reset:$.editable.types.defaults.reset,i.apply(u,[n,t]),!1}))}},text:{element:function(n){var t=$("<input />");return n.width!="none"&&t.width(n.width),n.height!="none"&&t.height(n.height),t.attr("autocomplete","off"),$(this).append(t),t}},textarea:{element:function(n){var t=$("<textarea />");return n.rows?t.attr("rows",n.rows):n.height!="none"&&t.height(n.height),n.cols?t.attr("cols",n.cols):n.width!="none"&&t.width(n.width),$(this).append(t),t}},select:{element:function(){var n=$("<select />");return $(this).append(n),n},content:function(data,settings,original){var json,key,option;String==data.constructor?eval("var json = "+data):json=data;for(key in json)json.hasOwnProperty(key)&&"selected"!=key&&(option=$("<option />").val(key).append(json[key]),$("select",this).append(option));$("select",this).children().each(function(){($(this).val()==json.selected||$(this).text()==$.trim(original.revert))&&$(this).attr("selected","selected")})}}},addInputType:function(n,t){$.editable.types[n]=t}};$.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{}}})(jQuery);
//# sourceMappingURL=jquery.jeditable.min.js.map
