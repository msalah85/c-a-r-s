var $CarPaperTypeID=$("#CarPaperTypeID"),today=$.datepicker.formatDate("m/d/yy",new Date),print_today=function(){return $(".today").html(today),$("#contr-desc").val(function(){return $(this).val().replace("__/__/____",today)}),today},renderSVG=function(n,t,i){document.createElement("canvas");var r=document.createElement("canvas");r.width=t||500;r.height=i||500;document.getElementById("sig").innerHTML="";document.getElementById("sig").appendChild(r);typeof FlashCanvas!="undefined"&&FlashCanvas.initElement(r);canvg(r,n,{log:!0,renderCallback:function(n){if(typeof FlashCanvas!="undefined")document.getElementById("sig").innerHTML="svg not supported";else{var t=(new XMLSerializer).serializeToString(n);document.getElementById("sig").innerHTML=t}}})},sURL="/api/data.aspx/",showPageData=function(n){var u=commonManger.comp2json(n.d),t=u.list,i=u.list1,r=u.list2,f,e;t&&($(".client:eq(0)").html('<a title="حساب العميل" href="../clientcars.aspx?id='+t.ClientID+'">'+t.full_name+"<\/a>"),$(".client:eq(1)").val(t.full_name),$("#model").html('<a title="تفاصيل السيارة" href="../CarDetailsPrint.aspx?id='+t.CarID+'">'+t.MakerNameEn+" - "+t.TypeNameEn+" - "+t.Year+"<\/a>"),$("#chassis").html(t.ChassisNo),$("#lotno").html(t.LotNo),$("#cid").html('<a title="تفاصيل السيارة" href="../CarDetailsPrint.aspx?id='+t.CarID+'">'+t.CarID+"<\/a>"),$("#color").html(t.ColorNameAr),$("#contr-desc").val(function(){return $(this).val().replace("00.00",numeral(t.SalePrice).format("0,0"))}),$("#SigTypeID").val()==="2"&&($("#header").html("إيصال إستلام VCC"),$("#contr-desc").val(function(){return $(this).val().replace("الاوراق الاصلية مع","")})));i&&($("#CarPaperTypeID").val(i.CarPaperTypeID).change(),$("#InsuranceAmount").val(i.InsuranceAmount),$("#Shipper").val(i.Shipper),$("#header").text(i.Subject),$("#SigID").val(i.ID),$("#contr-desc").val(i.Description),$("#Recipient").val(i.Recipient),$(".today").val(i.AddDate),$("#Recipient").val(i.Recipient),$("#sig").html(i.Picture),printMode());r&&($("#Active").prop("checked",r.Active),$("#CustomsNo").val(r.CustomsNo),f=$.datepicker.formatDate("m/d/yy",new Date(r.CustomsDate)),$("#CustomsDate").val(f),r.Active&&$(".reexport-table").removeClass("hidden-print"));$("#SigTypeID").val()==="2"?($("#CarPaperTypeID").remove(),e="أقر أنا الموقع أدناه بأنى استلمت البطاقة الجمركية للسيارة المدرجه أوصافها أعلاه من شركة العراق لتجارة السيارات المستعملة ذ.م.م بغرض فحص السيارة.",$("#contr-desc").val(e),$(".reexport-table").addClass("hidden"),$(".vcc").remove(),$(".paper").attr("href","signature.aspx?id="+$("#SaleInvoiceID").val()+"&type=1")):($(".paper").remove(),$(".vcc").attr("href","signature.aspx?id="+$("#SaleInvoiceID").val()+"&type=2"))},printMode=function(){$("#clear,#svg,#fullcs,#CarPaperTypeID").remove();$("textarea").attr("disabled",!0)},getcarDetails=function(){var i=commonManger.getUrlVars(),n=i.id,t=i.type,r=sURL+"GetDataList",u=JSON.stringify({actionName:"CarSaleInvoices_SelectContract",names:["id","type"],values:[n!=undefined?n:0,t!=undefined?t:0]});$("#SaleInvoiceID").val(n);$("#SigTypeID").val(t);dataService.callAjax("Post",u,r,showPageData,commonManger.errorException)},sigSaved=function(n){n=n.d;n.Status?($("#sig").signature("disable"),$("#Active").is(":checked")&&$(".reexport-table").removeClass("hidden-print"),printMode(),commonManger.showMessage("تم الحفظ",n.message)):commonManger.showMessage("خطأ أثناء تنفيذ الإجراء",n.message)},saveSignature=function(){var n={ID:$("#SigID").val(),SigTypeID:$("#SigTypeID").val(),CarID:$("#cid").text(),Recipient:$("#Recipient").val(),ContractDesc:$("#contr-desc").val(),AddDate:$(".today").text(),Picture:$("#sig").signature("toSVG"),actionName:"CarSaleInvoiceSignatures_Save",Active:$("#Active").is(":checked"),CustNo:$("#CustomsNo").val(),CustDate:$("#CustomsDate").val(),CarPaperTypeID:$CarPaperTypeID.val(),Shipper:$("#Shipper").val(),InsuranceAmount:$("#InsuranceAmount").val(),Subject:$("#header").text(),SaleInvoiceID:$("#SaleInvoiceID").val()},t={actionName:n.actionName,names:["ID","SigTypeID","CarID","AddDate","Recipient","Description","Picture","Active","CustomsNo","CustomsDate","CarPaperTypeID","Subject","InsuranceAmount","SaleInvoiceID","Shipper"],values:[n.ID,n.SigTypeID,n.CarID,n.AddDate,n.Recipient,n.ContractDesc,n.Picture,n.Active,n.CustNo,n.CustDate,n.CarPaperTypeID,n.Subject,n.InsuranceAmount,n.SaleInvoiceID,n.Shipper]};n.Active&&n.CustDate!==""&&n.CustNo!==""||!n.Active?dataService.callAjax("Post",JSON.stringify(t),sURL+"saveData",sigSaved,commonManger.errorException):commonManger.showMessage("بيانات مطلوبة","يرجي التأكد من ادخال رقم وتاريخ البيان الجمركي.")},ActiveMe=function(n){n?$(".reexport-table input[type=text]").attr("disabled",!1):$(".reexport-table input[type=text]").attr("disabled",!0)},setPaperDescription=function(n){var t,i;$(".shipper").addClass("hidden").find("textarea").val("");$("#contr-desc").val("");n==="3"?$(".shipper").removeClass("hidden"):n==="4"&&(window.location.href="signature.aspx?id="+$("#SaleInvoiceID").val()+"&type=2");t={uaeForm:"أقر أنا الموقع ادناه بأنى استلمت البطاقة الجمركية مع الرخصه التجارية للسيارة المدرجة أوصافها أعلاه من شركة العراق لتجارة السيارات المستعملة بعقد بيع رقم/000  بتاريخ: __/__/____\nولأجله وقعت.",gulfForm:"أقر أنا الموقع ادناه بأنى استلمت البطاقة الجمركية مع البيان الجمركى مع الرخصه التجارية للسيارة المدرجة أوصافها أعلاه  من شركة العراق لتجارة السيارات المستعملة بعقد بيع رقم/000  بتاريخ: __/__/____\nولأجله وقعت.",insuranceForm:"أقر أنا الموقع ادناه بأنى استلمت البطاقة الجمركية مع البيان الجمركى مع شهادة خروج للسيارة المدرجة أوصافها أعلاه من شركة العراق لتجارة السيارات المستعملة،\nولأجله وقعت."};t=$.map(t,function(n){return n});i=t[n*1-1];$("#contr-desc").val(function(){return i.replace("__/__/____",today)})};print_today();getcarDetails();$("#Active").click(function(){ActiveMe($(this).prop("checked"))});$("#sig").signature({color:"#145394"});$("#clear").click(function(){$("#sig").signature("clear")});$("#svg").click(function(){saveSignature()});$("#fullcs").click(function(){$(".kbw-signature").toggleClass("fullscreen");$(".btn-group").toggleClass("group-right")});$("#CustomsDate").datepicker({dateFormat:"m/d/yy"});$CarPaperTypeID.change(function(){setPaperDescription($(this).val())});
//# sourceMappingURL=data.min.js.map
