var Customspaymentsmaster=Customspaymentsmaster||{},Customspaymentsmaster=function(){var t="",n=0,i=function(){o();f();r();u()},r=function(){$("#SearchAll").click(function(n){n.preventDefault();t=$("#CustomsCompanyID").val();e()})},u=function(){n=commonManger.getQueryStrs().pend;n>0&&($(".title").text("عرض حوالات التخليص قيد الدفع"),$(".table-header").css({"border-color":"#666",background:"#404040"}))},f=function(){dataService.callAjax("Post",JSON.stringify({actionName:"Customspaymentsmaster_Properties",value:0}),mainServiceUrl+"GetData",function(n){var t=JSON.parse(n.d);$.each(t,function(n,t){t.tbl_name==0&&$("#CustomsCompanyID").append("<option value='"+t.ID+"'>"+t.Name+"<\/option>")});$("#CustomsCompanyID").chosen().trigger("chosen:updated").trigger("liszt:updated")},commonManger.errorException)},e=function(){$("#listItems").DataTable().draw()},o=function(){n=commonManger.getQueryStrs().pend;n=n>0?1:0;var i=$("#listItems").DataTable({sDom:"<'row-fluid tbl-head-options'<'span6'l><'span6 lft-pane'BT>r>t<'row-fluid'<'span6'i><'span6'p>>",buttons:[{extend:"csv",text:"تصدير إكسيل"},{extend:"copy",text:"نسـخ"},{text:"طباعة",action:function(){window.print()}}],bServerSide:!0,responsive:!0,bRetrieve:!1,bDestroy:!0,sAjaxSource:"CustomsPayments.aspx/GetCustomspaymentsmaster",fnServerParams:function(i){i.push({name:"CustomsCompanyID",value:t},{name:"Type",value:n})},fnServerData:function(n,t,i){dataService.callAjax("GET",t,n,function(n){i(n.d)},commonManger.errorException)},fnFooterCallback:function(n,t){for(var r=0,i=0;i<t.length;i++)r+=t[i].AmountDhs;$(n).find("th:eq(1)").html(numeral(r).format("0,0"))},iDisplayLength:50,aoColumns:[{mDataProp:"PaymentsId",bSortable:!0,mData:function(n){return'<a href="CustomspaymentsmasterPrint.aspx?id='+n.PaymentsId+'" title="طباعة">'+n.PaymentsId+"<\/a>"}},{mDataProp:"PaymentsDates",mData:function(n){return commonManger.dateFormat(n.PaymentsDates,"YYYY/M/D","DD/MM/YYYY")},bSortable:!0},{mDataProp:"CustomsCompanyNameAr",bSortable:!0},{mDataProp:"CheckNo",bSortable:!1,mData:function(n){var t='<a title="طباعة السند" href="ReceiptPaymentsPrint.aspx?id='+n.CheckNo+'">'+n.CheckNo+"<\/a>";return n.CheckNo?t:'<a href="ReceiptPaymentsAdd.aspx?camount='+parseFloat(n.AmountDhs).toFixed()+"&ids="+n.PaymentsId+'">سند صرف<\/a>'}},{mDataProp:"TotalAmount",bSortable:!1,mData:function(n){return numeral(n.TotalAmount).format("0,0.00")}},{mDataProp:"AmountDhs",bSortable:!1,mData:function(n){return numeral(n.AmountDhs).format("0,0.00")}},{bSortable:!1,sClass:"hidden-print",mData:function(n){return'<a href="CustomspaymentsmasterPrint.aspx?id='+n.PaymentsId+'" class="btn btn-minier btn-success" data-rel="tooltip" title="طباعة" data-original-title="طباعة"><i class="icon-print"><\/i><\/a>'+(n.CheckNo?"":' <a class="btn btn-minier btn-info" title="تعديل" href="CustomspaymentsDetails.aspx?id='+n.PaymentsId+'"><i class="icon-edit"><\/i><\/a> <button class="btn btn-mini btn-danger remove" data-rel="tooltip" data-placement="top" title="حــذف"><i class="icon-remove icon-only"><\/i><\/button>')}}]});$("#listItems tbody").delegate("tr button.remove","click",function(n){n.preventDefault();var u=$(this),t=u.closest("tr").index(),r;t!==null&&DeleteConfirmation(function(){r=i.row(t).data();var n={value:r.PaymentsId},u=function(){i.draw()};dataService.callAjax("Post",JSON.stringify(n),"CustomsPayments.aspx/updatedate",u,commonManger.errorException)})})};return{Init:i}}();