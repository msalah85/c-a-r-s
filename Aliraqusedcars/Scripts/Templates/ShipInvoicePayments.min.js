var ShipInvoicePayments=ShipInvoicePayments||{},ShipInvoicePayments=function(){var t="",n=0,i=function(){$("#btnSearchAll").on("click",function(){f()});e();u();r()},r=function(){n=commonManger.getQueryStrs().type;n>0&&($(".title").text("عرض حوالات الشحن قيد الدفع"),$(".table-header").css({"border-color":"#666",background:"#404040"}))},u=function(){dataService.callAjax("Post",JSON.stringify({actionName:"ShipInvoicePayments_Properties",value:""}),mainServiceUrl+"GetData",function(n){var t=JSON.parse(n.d);$.each(t,function(n,t){$("#ShipCompanyID").append("<option value='"+t.ID+"'>"+t.Name+"<\/option>")});$("#ShipCompanyID").chosen().trigger("chosen:updated").trigger("liszt:updated")},commonManger.errorException)},f=function(){$("#listItems").DataTable().draw(!0)},e=function(){t=$("#ShipCompanyID").val();n=commonManger.getQueryStrs().type;n=n>0?1:0;var i=$("#listItems").DataTable({sDom:"<'row-fluid'<'span6'l><'span6 lft-pane'BTf>r>t<'row-fluid'<'span6'i><'span6'p>>",buttons:[{extend:"csv",text:"تصدير إكسيل"},{extend:"copy",text:"نسـخ"},{text:"طباعة",action:function(){$(".dataTables_length,.form-horizontal").closest("div.row-fluid").addClass("hidden-print");window.print()}}],language:{search:"_INPUT_",searchPlaceholder:"برقم الحواله"},aaSorting:[],bServerSide:!0,bRetrieve:!1,bDestroy:!0,responsive:!0,fnServerParams:function(i){i.push({name:"ShipCompanyID",value:t},{name:"Type",value:n})},sAjaxSource:"ShipInvoicePayments.aspx/GetShipInvoicePayments",fnServerData:function(n,t,i){dataService.callAjax("GET",t,n,function(n){i(n.d)},commonManger.errorException)},iDisplayLength:50,aoColumns:[{mDataProp:"ShipInvoicePaymentsID",bSortable:!0,mData:function(n){return'<a href="ShipInvoicePaymentsPrint.aspx?id='+n.ShipInvoicePaymentsID+'" data-rel="tooltip" title="طباعة" data-original-title="طباعة">'+n.ShipInvoicePaymentsID+"<\/i><\/a>"}},{mData:function(n){return commonManger.dateFormat(n.PaymentsDates,"M/D/YYYY","DD/MM/YYYY")},bSortable:!0},{mDataProp:"ExchangeCompanyNameAr",bSortable:!1,mData:function(n){var t=n.CheckNo?"":'<a href="ReceiptPaymentsAdd.aspx?samount='+parseFloat(n.AmountDhs).toFixed()+"&ids="+n.ShipInvoicePaymentsID+'">سند صرف<\/a>',i=n.ExchangeCompanyNameAr?"":'<a href="ShipInvoicePaymentsPrint.aspx?review=1&id='+n.ShipInvoicePaymentsID+'">تصفير الحوالة<\/a>';return n.ExchangeCompanyNameAr?n.ExchangeCompanyNameAr:t!=""?t:i}},{mDataProp:"ShipMainCompanyNameAr",bSortable:!1},{mDataProp:"Amount",bSortable:!1,mData:function(n){return numeral(n.Amount).format("0,0.00")}},{bSortable:!1,sClass:"hidden-print",mData:function(n){return'<a href="ShipInvoicePaymentsPrint.aspx?id='+n.ShipInvoicePaymentsID+'" class="btn btn-minier btn-success" data-rel="tooltip" title="طباعة" data-original-title="طباعة"><i class="icon-print"><\/i><\/a>'+(n.CheckNo?"":' <button class="btn btn-mini btn-danger remove" data-rel="tooltip" data-placement="top" title="حــذف"><i class="icon-remove icon-only"><\/i><\/button>')}}]});commonManger.searchData(i);$("#listItems tbody").delegate("tr button.remove","click",function(n){n.preventDefault();var u=$(this),t=u.closest("tr"),r;t!==null&&DeleteConfirmation(function(){r=i.row(t).data();var n={value:r.ShipInvoicePaymentsID},u=function(){i.draw()};dataService.callAjax("Post",JSON.stringify(n),"ShipInvoicePayments.aspx/updatedate",u,commonManger.errorException)})})};return{Init:i}}();ShipInvoicePayments.Init();