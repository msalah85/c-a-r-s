var CarShippExpenses=function(){var n=0,i=function(){var t=decodeURIComponent(commonManger.getUrlVars().id);t!==undefined&&t!==null&&t!==""?(n=t,$("#CarIDNo").val(n),$("#CarID").val(n)):(n=0,$("#CarIDNo").text(0),$("#CarID").val(0));o();e();r()},r=function(){$(".printExp").on("click",function(n){n.preventDefault();window.open("CarShippExpensesPrint.aspx?id="+$("#CarIDNo").val(),"_self")});$("#divAddEdit").on("click",function(){$("#ExpenseID").val("0");$("#CarIDNo").text(n);$("#CarID").val(n);commonManger.ResetControls("aspnetForm");commonManger.showPopUpDialog("اضافة مصروف الشحن ","save","addModal")});$("#SaveAll").click(function(n){n.preventDefault();var i=commonManger.applyValidation();i&&commonManger.saveData("addModal","aspnetForm",u,f,"CarShippExpenses_save","1",t)})},u=function(n){n.Status&&$("#listItems").dataTable().fnDraw()},f=function(){},t=function(){},e=function(){var t={actionName:"CarShippExpenses_Properties",value:n};dataService.callAjax("Post",JSON.stringify(t),sUrl+"GetData",function(n){var i=commonManger.comp2json(n.d),u=i.list,r=i.list1,t=i.list2;r&&$("#CarShippExpenseTypeID").append($.map(r,function(n){return $("<option />").val(n.ID).text(n.Name)}));t&&($("#model").val(t.model),t.full_name&&$("#full_name,.client-Acc").html('<a href="ClientCars.aspx?id='+t.ClientID+'">'+t.full_name+"<\/a>"))},commonManger.errorException)},o=function(){var t=$("#listItems").dataTable({bServerSide:!0,oTableTools:{aButtons:[]},sAjaxSource:"CarShippExpenses.aspx/GetCarShippExpenses?id="+n,fnServerData:function(n,t,i){dataService.callAjax("GET",t,n,function(n){i(n.d)},commonManger.errorException)},iDisplayLength:150,aoColumns:[{mDataProp:"CarShippExpenseTypeName",bSortable:!0},{mDataProp:"ExpenseDate",bSortable:!0},{mDataProp:"ExpenseCost",bSortable:!0},{mDataProp:"ExpenseDetails",bSortable:!0},{bSortable:!1,mData:function(){return'<button class="btn btn-minier btn-info edit" data-rel="tooltip" data-placement="top" data-original-title="تعديل"><i class="icon-edit"><\/i><\/button> <button class="btn btn-minier btn-danger remove" data-rel="tooltip" data-placement="top" data-original-title="حــذف"><i class="icon-remove"><\/i><\/button>'}}]});$("#listItems tbody").delegate("tr button","click",function(n){var u,i,r,f,e;n.preventDefault();u=$(this);i=u.closest("tr").index();i!=null&&(u.hasClass("edit")?(f="تعديل مصروف الشحن ",e="save",r=t.fnGetData(i),commonManger.ResetControls("aspnetForm"),commonManger.getDataForUpdate(r,"aspnetForm"),commonManger.showPopUpDialog(f,e,"addModal")):DeleteConfirmation(function(){r=t.fnGetData(i);DTO={value:r.ExpenseID};dataService.callAjax("Post",JSON.stringify(DTO),"CarShippExpenses.aspx/updatedate",function(){$("#listItems").dataTable().fnDraw()},commonManger.errorException)}))})};return{Init:i,aftersave:t}}();
//# sourceMappingURL=CarShippExpenses.min.js.map
