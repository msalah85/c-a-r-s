var showPageData=function(n){var f=comp2json(n.d),t=f.list,i,r,u;t&&($("#Carmodel").val(t.MakerNameEn+" "+t.TypeNameEn+" "+t.Year),i=t.CarID,$("#CarID").val(i),$("#WesitePrice").val(numeral(t.WesitePrice).format("0.0")),$("#ChassisNo").val(t.ChassisNo),$("#LotNo").val(t.LotNo),$("#CarColor").val(t.ColorNameAr),$("#CarStatus").val(t.WorkingStatusName),$("#Notes").val(t.Notes),r=t.MainPicture,r!==""&&$("#main-image").attr("src","//www.iraqusedcars.ae/public/cars/"+i+"/"+r),u=t.view_website,$(":radio[name=view_website][value="+(u!=""?u:"null")+"]").prop("checked",!0))},getpageData=function(n){var t=sURL+"GetData",i=JSON.stringify({actionName:"CarsData_Select4Client",value:n});dataService.callAjax("Post",i,t,showPageData,errorException)},loadPage=function(){var n=urlManager.getUrlVars().id;n&&getpageData(n)},PriceSaved=function(n){if(n=n.d,n.Status){var t=messagesAr.saveSuccess,i=$(":radio[name=view_website]:checked").val();i==="null"?t+=messagesAr.saveViewWebsite:i==="true"&&potingToSocial();showMessageAlert("success",messagesAr.doneTitle,t)}else showMessageAlert("danger",messagesAr.errorTitle,messagesAr.saveError)},savePrice=function(){var n=$(":radio[name=view_website]:checked").val(),t=[["Id","view_website","WesitePrice"],[$("#CarID").val(),n==="null"?null:n,$("#WesitePrice").val()]],i={actionName:"CarsData_SaveClientPrice",names:t[0],values:t[1]};dataService.callAjax("Post",JSON.stringify(i),sURL+"saveData",PriceSaved,errorException)},potingToSocial=function(){var n={title:$("#Carmodel").val(),message:"رقم السيارة: "+$("#CarID").val()+"\r\nالموديل: "+$("#Carmodel").val()+"\r\nالحالة: "+$("#CarStatus").val()+"،\r\nالسعر: "+$("#WesitePrice").val()+" $",url:"https://www.iraqusedcars.ae/car/"+$("#CarID").val()+"-"+$("#Carmodel").val().replace(" ","-").replace(" ","-").replace(" ","-"),image:"https:"+$("#main-image").attr("src")},t=function(){};dataService.callAjax("Post",JSON.stringify(n),"/api/social.aspx/postToAll",t,errorException)},form;loadPage();form=$("#car-Price");form.validate({showErrors:function(n,t){$.each(this.validElements(),function(n,t){var i=$(t);i.data("title","").removeClass("error").tooltip("destroy")});$.each(t,function(n,t){var i=$(t.element);i.tooltip("destroy").data("title",t.message).addClass("error").tooltip()})}});$("#car-Price").submit(function(n){n.preventDefault();form.valid()?savePrice():showMessageAlert("",messagesAr.requiredTitle,messagesAr.required)});