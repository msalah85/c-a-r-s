/*!
 * Infinite Ajax Scroll, a jQuery plugin 
 * Version v0.1.4
 * http://webcreate.nl/
 *
 * Copyright (c) 2011 Jeroen Fiege
 * Licensed under the MIT License: 
 * http://webcreate.nl/license
 */
(function(n){n.ias=function(t){function y(){e.onChangePage(function(n,t,u){r&&r.setPage(n,u);i.onPageChange.call(this,n,u,t)});return u(),r&&r.havePage()&&(f(),pageNum=r.getPage(),a.forceScrollTop(function(){pageNum>1?(c(pageNum),curTreshold=o(!0),n("html,body").scrollTop(curTreshold)):u()})),v}function u(){p();n(window).scroll(s)}function s(){scrTop=n(window).scrollTop();wndHeight=n(window).height();curScrOffset=scrTop+wndHeight;curScrOffset>=o()&&h(curScrOffset)}function f(){n(window).unbind("scroll",s)}function p(){n(i.pagination).hide()}function o(t){return(el=n(i.container).find(i.item).last(),el.size()==0)?0:(treshold=el.offset().top+el.height(),t||(treshold+=i.tresholdMargin),treshold)}function h(t,r){if(urlNextPage=n(i.next).attr("href"),!urlNextPage)return f();e.pushPages(t,urlNextPage);f();b();w(urlNextPage,function(t,f){result=i.onLoadItems.call(this,f);result!==!1&&(n(f).hide(),curLastItem=n(i.container).find(i.item).last(),curLastItem.after(f),n(f).fadeIn());n(i.pagination).replaceWith(n(i.pagination,t));k();u();r&&r.call(this)})}function w(t,r){var u=[];n.get(t,null,function(t){n(i.container,t).find(i.item).each(function(){u.push(this)});r&&r.call(this,t,u)},"html")}function c(t){curTreshold=o(!0);curTreshold>0&&h(curTreshold,function(){f();e.getCurPageNum(curTreshold)+1<t?(c(t),n("html,body").animate({scrollTop:curTreshold},400,"swing")):(n("html,body").animate({scrollTop:curTreshold},1e3,"swing"),u())})}function l(){return loader=n(".ias_loader"),loader.size()==0&&(loader=n("<div class='ias_loader'><img src='"+i.loader+"'/><\/div>"),loader.hide()),loader}function b(){loader=l();el=n(i.container).find(i.item).last();el.after(loader);loader.fadeIn()}function k(){loader=l();loader.remove()}var i=n.extend({},n.ias.defaults,t),a=new n.ias.util,e=new n.ias.paging,r=i.history?new n.ias.history:!1,v=this;y()};n.ias.defaults={container:"#container",item:".item",pagination:"#pagination",next:".next",tresholdMargin:0,history:!0,onPageChange:function(){},onLoadItems:function(){}};n.ias.util=function(){function u(){n(window).load(function(){t=!0})}var t=!1,i=!1,r=this;u();this.forceScrollTop=function(u){n("html,body").scrollTop(0);i||(t?(u.call(),i=!0):setTimeout(function(){r.forceScrollTop(u)},1))}};n.ias.paging=function(){function e(){n(window).scroll(o)}function o(){scrTop=n(window).scrollTop();wndHeight=n(window).height();curScrOffset=scrTop+wndHeight;curPageNum=f(curScrOffset);curPagebreak=s(curScrOffset);u!=curPageNum&&r.call(this,curPageNum,curPagebreak[0],curPagebreak[1]);u=curPageNum}function f(n){for(i=t.length-1;i>0;i--)if(n>t[i][0])return i+1;return 1}function s(n){for(i=t.length-1;i>=0;i--)if(n>t[i][0])return t[i];return null}var t=[[0,document.location.toString()]],r=function(){},u=1;e();this.getCurPageNum=function(n){return f(n)};this.onChangePage=function(n){r=n};this.pushPages=function(n,i){t.push([n,i])}};n.ias.history=function(){function i(){n=!!(window.history&&history.pushState&&history.replaceState);n=!1}var t=!1,n=!1;i();this.setPage=function(n,t){this.updateState({page:n},"",t)};this.havePage=function(){return this.getState()!=!1};this.getPage=function(){return this.havePage()?(stateObj=this.getState(),stateObj.page):1};this.getState=function(){if(n){if(stateObj=history.state,stateObj&&stateObj.ias)return stateObj.ias}else if(haveState=window.location.hash.substring(0,7)=="#/page/",haveState)return pageNum=parseInt(window.location.hash.replace("#/page/","")),{page:pageNum};return!1};this.updateState=function(n,i,r){t?this.replaceState(n,i,r):this.pushState(n,i,r)};this.pushState=function(i,r,u){n?history.pushState({ias:i},r,u):(hash=i.page>0?"#/page/"+i.page:"",window.location.hash=hash);t=!0};this.replaceState=function(t,i,r){n?history.replaceState({ias:t},i,r):this.pushState(t,i,r)}}})(jQuery);
//# sourceMappingURL=Infinite-Scroll-Plugin.min.js.map
