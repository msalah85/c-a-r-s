var pageManager=pageManager||{},pageManager=function(){var n="",t="",i="",r=function(){e();u()},u=function(){$("#btnSearchAll").click(function(r){r.preventDefault();n=$("#clientId").val()?$("#clientId").val():"";t=commonManger.dateFormat($("#From").val())?commonManger.dateFormat($("#From").val()):"";i=commonManger.dateFormat($("#To").val())?commonManger.dateFormat($("#To").val()):"";$("#listItems").DataTable().draw()})},f=function(){$(".ace-tooltip").tooltip()},e=function(){var r=$("#listItems").DataTable({sDom:"<'row-fluid'<'span6'l><'span6 lft-pane'BT>r>t<'row-fluid'<'span6'i><'span6'p>>",buttons:[{extend:"csv",text:"تصدير إكسيل"},{extend:"copy",text:"نسـخ"},{text:"طباعة",action:function(){$(".dataTables_length,.form-horizontal").closest("div.row-fluid").addClass("hidden-print");window.print()}}],bProcessing:!0,bServerSide:!0,responsive:!0,bDestroy:!0,sAjaxSource:sUrl+"LoadDataTablesXML",fnServerParams:function(r){r.push({name:"funName",value:"InvoicesSales_Deleted"},{name:"names",value:"Client~From~To"},{name:"values",value:n+"~"+t+"~"+i})},fnServerData:function(n,t,i){dataService.callAjax("GET",t,n,function(n){commonManger.setData2Grid(n,t.sEcho,i);f()},commonManger.errorException)},aaSorting:[],iDisplayLength:50,aoColumns:[{mDataProp:"SaleInvoiceID",bSortable:!0,mData:function(n){return'<a target="_blank" href="InvoiceSalePrint.aspx?id='+n.SaleInvoiceID+'" title="طباعة السيارة">'+n.SaleInvoiceID+"<\/a>"}},{mDataProp:"CarID",bSortable:!1},{mDataProp:"InvoiceDate",bSortable:!0,mData:function(n){return commonManger.formatJSONDateCal(n.InvoiceDate)}},{mDataProp:"full_name",bSortable:!0,mData:function(n){return'<a href="ClientCars.aspx?id='+n.ClientID+'" title="حساب العميل">'+n.full_name+"<\/a>"}},{mDataProp:"TypeNameEn",bSortable:!0,mData:function(n){return n.MakerNameEn+" - "+n.TypeNameEn}},{mData:"DistinationNameAr",bSortable:!1,mData:function(n){return n.DistinationNameAr?n.DistinationNameAr:""}},{mData:"SalePrice",bSortable:!1,mData:function(n){return numeral(n.SalePrice).format("0,0")}},{mDataProp:"DeleteUserName",bSortable:!0,mData:function(n){return(n.DeleteUserName?n.DeleteUserName:"")+(n.DeleteReason?' <i title="'+n.DeleteReason+'" class="ace-tooltip icon-info-sign red pull-left"><\/i>':"")}},{mDataProp:"DeleteDate",bSortable:!0,mData:function(n){return n.DeleteDate?commonManger.formatJSONDateCal(n.DeleteDate):""}},{bSortable:!1,sClass:"hidden-print",mData:function(n){return'<a target="_blank" class="btn btn-mini btn-grey" href="InvoiceSalePrint.aspx?id='+n.SaleInvoiceID+'" title="طباعة الفاتورة"><i class="icon-print"><\/i><\/a>'}}]})};return{Init:r}}();