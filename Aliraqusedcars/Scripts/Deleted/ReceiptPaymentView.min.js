var ReceiptPayment=function(){var n="",t="",i="",r="",f=function(){$("#SearchAll").on("click",function(f){f.preventDefault();n=$("#ToName").val();t=$("#BankID").val()!=""?$("#BankID").val():"";i=commonManger.dateFormat($("#From").val())!=""?commonManger.dateFormat($("#From").val()):"";r=commonManger.dateFormat($("#To").val())!=""?commonManger.dateFormat($("#To").val()):"";u()});$("#cancelModal .modal-footer .btn-danger").on("click",function(n){var t,i;if(n.preventDefault(),t=$("#ReceiptID").val(),i=$("#DeleteReason").val(),t&&i!=""){var r=[t,i],u={actionName:"ReceiptPayments_Delete",names:["ReceiptID","DeleteReason"],values:r};dataService.callAjax("Post",JSON.stringify(u),sUrl+"saveData",e,commonManger.errorException)}else commonManger.showMessage("حقول مطلوبة","يرجي ادخال سبب الإلغاء أولاً."),$("#DeleteReason").focus()});u();s()},e=function(n){n=n.d;$(".modal").modal("hide");commonManger.showMessage("تم تنفيذ الإجراء بنجاح.",n.message);n.Status&&$("#listItems").DataTable().draw()},o=function(n){var r=commonManger.comp2json(n.d),t=r.list,i;t&&(i=$(t).map(function(n,t){return $("<option />").val(t.BankID).text(t.BankName)}).get(),$("#BankID").append(i),$(".chzn-select").trigger("chosen:updated").trigger("liszt:updated"))},s=function(){dataService.callAjax("Post",JSON.stringify({actionName:"ReceiptPayments_Properties"}),sUrl+"GetDataDirect",o,commonManger.errorException)},u=function(){var u=$("#listItems").DataTable({sDom:"<'row-fluid'<'span6'l><'span6 lft-pane'BT>r>t<'row-fluid'<'span6'i><'span6'p>>",buttons:[{extend:"csv",text:"تصدير إكسيل"},{text:"طباعة",action:function(){$(".dataTables_length,.form-horizontal").closest("div.row-fluid").addClass("hidden-print");window.print()}}],bDestroy:!0,bServerSide:!0,responsive:!0,responsive:!0,sAjaxSource:sUrl+"LoadDataTablesXML",fnServerParams:function(u){var f=n+"~"+t+"~"+i+"~"+r+"~1";u.push({name:"funName",value:"ReceiptPayments_SelectList"},{name:"names",value:"ToName~BankID~From~To~Deleted"},{name:"values",value:f})},fnServerData:function(n,t,i){dataService.callAjax("GET",t,n,function(n){commonManger.setData2Grid(n,t.sEcho,i)},commonManger.errorException)},fnFooterCallback:function(n,t,i,r,u){for(var o,e=0,f=i;f<r;f++)o=t[u[f]].Amount,e+=parseFloat(o);$("strong.debit").text(numeral(e).format("0,0"))},aaSorting:[],iDisplayLength:50,aoColumns:[{mDataProp:"ReceiptID",bSortable:!0,type:"number"},{mDataProp:"AddDate",bSortable:!0,mData:function(n){return commonManger.formatJSONDateCal(n.AddDate)}},{mDataProp:"ExpenseTypeName",bSortable:!1},{mDataProp:"ToName",bSortable:!0},{mDataProp:"BankName",bSortable:!1},{mDataProp:"CheckNo",bSortable:!1},{mDataProp:"Amount",bSortable:!1,mData:function(n){return numeral(n.Amount).format("0,0")}},{mDataProp:"AmountDhs",bSortable:!1,mData:function(n){return numeral(n.AmountDhs).format("0,0")}},{sClass:"hidden-print",bSortable:!1,mData:function(n){return'<a href="ReceiptPaymentsPrint.aspx?id='+n.ReceiptID+'" class="btn btn-minier btn-success" data-rel="tooltip" title="طباعة" data-original-title="طباعة"><i class="icon-print"><\/i><\/a>'}}]});$("#listItems tbody").delegate("tr button","click",function(n){var i,r,t,f,e;n.preventDefault();i=$(this);r=i.closest("tr").index();r!=null&&i.hasClass("remove")&&(f="إلغاء إيداع عميل",e="cancelModal",t=u.row(r).data(),$("#ReceiptID").val(t.ReceiptID),$("#AddDate").val(commonManger.formatJSONDateCal(t.AddDate)),$("#Amount").val(t.Amount),commonManger.showPopUpDialog(f,"",e))})};return{Init:f}}();
//# sourceMappingURL=ReceiptPaymentView.min.js.map
